"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2646],{22646:function(e,t,n){n.d(t,{S:function(){return c}});var r=n(44259),s=n(9271),a=n(30529),i=n(10353),o=n(81819),l=n(23209);function c(){}c.Provider=function(e){var t;let n=null===(t=(0,a.useSession)().data)||void 0===t?void 0:t.accessToken,{getSentinelHeaders:c}=(0,l.Kz)(),d=o.Zr.useSetting("auth_token"),f=o.Zr.useSetting("engine"),m=null;d?m=d:n&&(m=n);let p=s.useMemo(()=>({pathfinder:(0,i.l)({auth_token:m,engine:f,get_sentinel_headers:c}),vm_proxy:{vnc_url:function(e){let t=e.replace(/\./g,"-");return new URL("/ws5901/".concat(t),"wss://operator.chatgpt.com/operator-api").toString()}}}),[m,f,c]);return(0,r.jsx)(u.Provider,{value:p,children:e.children})},c.useApi=function(){let e=s.useContext(u);if(!e)throw Error("ApiClient.useApi must be used within <ApiClient.Provider>");return e},(c||(c={})).pathfinder=i.l;let u=s.createContext(null)},34628:function(e,t,n){var r,s,a,i,o,l,c,u,d,f,m,p;n.d(t,{Bk:function(){return r},Lf:function(){return l},TP:function(){return i},cb:function(){return s},g8:function(){return o},hr:function(){return a}}),(c=r||(r={})).ACTIVE="Active",c.STOPPED="Stopped",c.WAITING_FOR_USER="WaitingForUser",c.COMPLETED="Completed",c.PENDING_START="PendingStart",c.IN_TAKEOVER="InTakeover",(u=s||(s={})).TRIAGED="org.openai.cua.operator.flag.triaged",u.CLAIM="org.openai.cua.operator.flag.claim",u.ACTIONABLE="org.openai.cua.operator.flag.actionable",(d=a||(a={})).ORANGE="org.openai.cua.operator.flag.color-orange",d.YELLOW="org.openai.cua.operator.flag.color-yellow",d.GREEN="org.openai.cua.operator.flag.color-green",d.BLUE="org.openai.cua.operator.flag.color-blue",d.CYAN="org.openai.cua.operator.flag.color-cyan",d.PURPLE="org.openai.cua.operator.flag.color-purple",d.PINK="org.openai.cua.operator.flag.color-pink",(f=i||(i={})).PRIVATE="Private",f.PUBLIC="Public",(m=o||(o={})).LIKE="Like",m.DISLIKE="Dislike",m.NEUTRAL="Neutral",(p=l||(l={})).Saved="Saved",p.DiningEvents="Dining & Events",p.Delivery="Delivery",p.LocalServices="Local Services",p.Shopping="Shopping",p.Travel="Travel",p.News="News"},10353:function(e,t,n){n.d(t,{l:function(){return o}});var r=n(61805),s=n(10667),a=n(34628),i=n(836);function o(e){let t=e.auth_token,n=e.engine,a=e.get_sentinel_headers;return{api_url:o,image_url_for_asset_id:l,image_url_for_asset_pointer:c,image_for_asset_pointer:u,me:d,update_user_settings:f,create:m,stop:p,resume:x,allowlist_domains:h,get:v,admin_get_conversation_sampler_version:g,messages_add:y,list:w,list_recent:b,share:j,delete_conversation:N,delete_all_conversations:C,complete:_,notify_viewing:k,message_feedback:z,conversation_feedback:S,accept_tos:E,verify_age:A,onboard_takeover:T,apps_list:L,admin_apps_create:R,admin_apps_update:P,admin_apps_list:M,admin_apps_get:D,apps_get:O,apps_update_app_settings:H,apps_clear_app_settings:I,apps_suggest:F,prompts_list:K,prompts_create:U,prompts_get:B,prompts_generate:q,prompts_update:V,prompts_delete:W,messages_user:Z,start_takeover:G,end_takeover:$,current_screenshot:function(){return o("/current_screenshot")},current_screenshot_asset:X,video_create:ee,video_get:et,get_available_engines:en,conversations_upload_to_feather:er,upload_file:es,push_notifications_subscribe:ea,check_push_notification:eo,enable_push_notifications:el,disable_push_notifications:ei,get_conversation_websocket_url:ec,admin_conversations_list:eu,conversation_upsert_flags:ed,clear_user_context_for_domain:Q,clear_user_context:Y,get_user_context:J};async function i(e,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(s.headers||(s.headers=new Headers),s.headers instanceof Headers&&s.headers.set("Authorization","Bearer ".concat(t))),await (0,r.g)(e,n,s)}function o(e){let t="https://operator.chatgpt.com/operator-api".replace(/\/$/,""),n=e.replace(/^\//,"");return new URL("".concat(t,"/").concat(n))}function l(e){return o("/images/?asset_id=".concat(e))}function c(e){return l(e.replace(/^.*:\/\//,""))}async function u(e){let n=c(e),r=new Headers;t&&r.set("Authorization","Bearer ".concat(t));let s=await window.fetch(n,{headers:r});return await s.blob()}async function d(){let e=o("/users/get");return await i(e,{})}async function f(e){let t=o("/users/settings"),n={...e};return await i(t,n)}async function m(e){let t=o("/conversations/create"),r={engine:n,...e},l=new Headers({...await a(s.t.qs.CreateConversation)});return await i(t,r,{headers:l})}async function p(e){let t=o("/conversations/stop");return await i(t,{conversation_id:e})}async function x(e){let t=o("/conversations/resume");return await i(t,{conversation_id:e,engine:n})}async function h(e,t){let n=o("/conversations/allowlist_domains");return await i(n,{conversation_id:e,domains:t})}async function v(e){let t=o("/conversations/get");return await i(t,{conversation_id:e})}async function g(e){let t=o("/admin/conversations/get_sampler_version");return await i(t,{conversation_id:e})}async function y(e){let t=o("/messages/add"),r={engine:n,...e},l=new Headers({...await a(s.t.qs.AddMessageToConversation)});return await i(t,r,{headers:l})}async function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=o("/conversations/list"),n={...e},r=await i(t,n);return r.conversations.sort((e,t)=>t.update_time-e.update_time),r}async function b(){let e=o("/conversations/list_recent");return await i(e,{})}async function j(e,t){let n=o("/conversations/share");return await i(n,{conversation_id:e,sharing_status:t})}async function N(e){let t=o("/conversations/delete");return await i(t,{conversation_id:e})}async function C(){let e=o("/conversations/delete_all");return await i(e,{})}async function _(e){let t=o("/conversations/complete");return await i(t,{conversation_id:e})}async function k(e){let t=o("/conversations/notify_viewing");return await i(t,{conversation_id:e})}async function S(e){let t=o("/conversations/feedback"),{conversation_id:n,type:r}=e,s=e.comment||null;return await i(t,{conversation_id:n,feedback:{type:r,comment:s}})}async function z(e){let t=o("/messages/feedback"),{message_id:n,type:r}=e,s=e.comment||null;return await i(t,{message_id:n,message_feedback:{type:r,comment:s}})}async function E(){let e=o("users/accept_tos");return await i(e,{})}async function A(e){let t=o("users/verify_age"),n={...e};return await i(t,n)}async function T(){let e=o("users/onboard_takeover");return await i(e,{})}async function L(){let e=o("/apps/list");return await i(e,{})}async function R(e){let t=o("/admin/apps/create"),n={...e};return await i(t,n)}async function P(e){let t=o("/admin/apps/update"),n={...e};return await i(t,n)}async function M(){let e=o("/admin/apps/list");return await i(e,{})}async function D(e){let t=o("/admin/apps/".concat(e));return await i(t,void 0,{method:"GET"})}async function O(e){let t=o("/apps/".concat(e));return await i(t,void 0,{method:"GET"})}async function H(e){let t=o("/apps/update_app_settings"),n={...e};return await i(t,n)}async function I(e){let t=o("/apps/clear_app_settings"),n={...e};return await i(t,n)}async function F(e){let t=o("/apps/suggest"),n={...e};return await i(t,n)}async function K(){let e=o("/prompts/list");return await i(e,{})}async function U(e){let t=o("/prompts/create"),n={...e};return await i(t,n)}async function B(e){let t=o("/prompts/".concat(e));return await i(t,void 0,{method:"GET"})}async function q(e){let t=o("/prompts/generate");return await i(t,{conversation_id:e})}async function V(e){let t=o("/prompts/update"),n={...e};return await i(t,n)}async function W(e){let t=o("/prompts/delete/".concat(e));return await i(t,{})}async function Z(e){let t=o("/messages/user"),r={engine:n,...e};return await i(t,r)}async function G(e){let t=o("/conversations/start_takeover");return await i(t,{conversation_id:e})}async function $(e){let t=o("/conversations/end_takeover"),n={...e};return await i(t,n)}async function Q(e){let t=o("/user_context/clear_domain"),n={...e};return await i(t,n)}async function Y(){let e=o("/user_context/clear");return await i(e,{})}async function J(){let e=o("/user_context/get");return await i(e,{})}async function X(){let e=o("/current_screenshot_asset");return{asset_id:(await i(e,{})).asset_pointer}}async function ee(e){let t=o("/conversations/video/create"),n={...e};return await i(t,n)}async function et(e){let t=o("/conversations/video/get"),n={...e};return await i(t,n)}async function en(){let e=o("/get_available_engines");return await i(e,{})}async function er(e){let t=o("/conversations/upload_to_feather"),n={...e};return await i(t,n)}async function es(e){let t=o("/upload_file"),n={...e};return await i(t,n)}async function ea(e){let t=o("/notifications/push/subscribe"),n={...e};return await i(t,n)}async function ei(){let e=o("/notifications/push/disable");return await i(e,{})}async function eo(e){let t=o("/notifications/push/exists"),n={...e};return await i(t,n)}async function el(){let e=o("/notifications/push/enable");return await i(e,{})}async function ec(e){let t=o("/conversations/websocket");return await i(t,{conversation_id:e})}async function eu(e){let t=o("/admin/conversations/get"),n={conversation_id:e.conversation_id},r=await i(t,n);return{conversations:[{id:r.id,title:r.metadata.title,user_id:r.metadata.user_id,create_time:r.metadata.create_time,update_time:r.metadata.update_time,messages_id_list:r.messages.map(e=>e.id),last_message:r.messages[-1],flags:[],sharing_status:r.metadata.sharing_status,feedback:void 0,visited_domains:r.metadata.visited_domains,status:null,app:null,vm_id:null,vm_host_address:null}],cursor:null}}async function ed(e){let t=o("/conversation/upsert_flags"),n={...e};return await i(t,n)}}o.utils=i,o.CuaTaskStatus=a.Bk,o.PrimaryConversationFlag=a.cb,o.SecondaryConversationFlag=a.hr,o.ConversationFeedbackType=a.g8,o.ConversationSharingStatus=a.TP},836:function(e,t,n){function r(e,t){return"".concat(e,"~").concat(e,"~PathfinderConversationToDisplayMessage~").concat(t)}function s(e,t){return"".concat(e,"~").concat(e,"~PathfinderConversationToSamplerMessage~").concat(t)}n.r(t),n.d(t,{get_display_message_id:function(){return r},get_sampler_message_id:function(){return s}})},43146:function(e,t,n){n.d(t,{y:function(){return o}});var r=n(44259),s=n(9271),a=n(36670),i=n(1819);let o=e=>{var t,n;let{app:o,className:l,fallbackIcon:c}=e,[u,d]=s.useState(!1);if(o.icon_url)return(0,r.jsx)("img",{src:o.icon_url,alt:null!==(t=o.name)&&void 0!==t?t:"",width:64,height:64,className:(0,a.cn)(l,"rounded-md")});{let e=c||(0,r.jsx)(i.T,{className:(0,a.cn)(l,"text-muted-foreground")});return(0,r.jsxs)(r.Fragment,{children:[!u&&e,(0,r.jsx)("img",{src:"/api/favicon?domain=".concat(o.domain),alt:null!==(n=o.name)&&void 0!==n?n:"",className:(0,a.cn)(!u&&"hidden",l),width:64,height:64,onLoad:()=>d(!0)})]})}}},6248:function(e,t,n){n.d(t,{H:function(){return a}});var r=n(44259);n(9271);var s=n(40016);function a(e){return(0,r.jsx)("span",{className:e.className,children:(0,r.jsx)(i,{...e})})}function i(e){let t=e.values;return t?a.parseMessage(e.message).map((n,s)=>(0,r.jsx)(o,{part:n,message:e.message,values:t},s)):e.message}function o(e){if("string"==typeof e.part)return e.part;let t=e.part.name;return e.values[t]}a.parseMessage=function(e){let t;let n=[],r=0;for(;null!==(t=l.placeholder.exec(e));)if(t.groups&&Array.isArray(t.indices)){let[a]=t.indices;(0,s.k)(a,"first_indices must exist");let[i,o]=a,l=e.slice(r,i);n.push(l);let c=t.groups.name;n.push({name:c}),r=o}let a=e.slice(r,e.length);return n.push(a),n};let l={placeholder:RegExp("{(?<name>[^}]+)}","dg")}},29491:function(e,t,n){n.d(t,{u:function(){return y}});var r=n(44259),s=n(9271),a=n(80262),i=n(51187),o=n(69853),l=n(36670),c=n(83346);let u=e=>{let{shouldScaleBackground:t=!0,...n}=e;return(0,r.jsx)(o.d.Root,{shouldScaleBackground:t,...n})};u.displayName="Drawer",o.d.Trigger;let d=o.d.Portal,f=(o.d.Close,s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.d.Overlay,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80",n),...s})}));f.displayName=o.d.Overlay.displayName;let m=s.forwardRef((e,t)=>{let{className:n,children:s,...a}=e;return(0,r.jsx)(d,{children:(0,r.jsxs)(c.e.Modal,{children:[(0,r.jsx)(f,{}),(0,r.jsxs)(o.d.Content,{ref:t,className:(0,l.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto max-h-[90svh] flex-col rounded-t-[10px] border bg-background",n),...a,children:[(0,r.jsx)("div",{className:"mx-auto my-4 h-2 w-[100px] flex-none rounded-full bg-muted"}),s]})]})})});m.displayName="DrawerContent",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.d.Title,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",n),...s})}).displayName=o.d.Title.displayName,s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.d.Description,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...s})}).displayName=o.d.Description.displayName;let p={Root:u,Content:m};var x=n(57214);let h=s.forwardRef(function(e,t){let n=x.D.useWide(),{children:s,className:a,open:o,onOpenChange:l,...c}=e;return n?(0,r.jsx)(i.V.Root,{open:e.open,onOpenChange:e.onOpenChange,children:(0,r.jsx)(i.V.Content,{ref:t,className:e.className,...c,hideCloseButton:e.hideCloseButton,onPointerDownOutside:e.onPointerDownOutside,onEscapeKeyDown:e.onEscapeKeyDown,children:e.children})}):(0,r.jsx)(p.Root,{noBodyStyles:!0,open:e.open,onOpenChange:e.onOpenChange,children:(0,r.jsx)(p.Content,{ref:t,className:e.className,...c,onAnimationEnd:()=>{var e;return null===(e=c.onAnimationEnd)||void 0===e?void 0:e.call(c)},children:(0,r.jsx)("div",{children:e.children})})})});h.displayName="DimensionAwareModal";var v=n(78574),g=n(73565);function y(e){return(0,r.jsxs)(j.Provider,{debug:"ModalStore",children:[(0,r.jsx)(w,{}),e.children]})}function w(){return j.useState(e=>e.list).map(e=>(0,r.jsx)(b,{modal:e},e.id))}function b(e){let t=j.useActions(),[n,a]=s.useState(!0),i=(0,v.G)(e),o=s.useRef(document.activeElement);return s.useEffect(function(){let r;if(!n){var s,a,l;null===(s=(a=i.current.modal.options).onClose)||void 0===s||s.call(a),i.current.modal.options.restoreFocusAfterClose&&(null===(l=o.current)||void 0===l||l.focus()),r=setTimeout(()=>{t.set(t=>{t.list=t.list.filter(t=>t.id!==e.modal.id)})},5e3)}return function(){clearTimeout(r)}},[n,t,e.modal.id,i]),(0,r.jsx)(h,{className:e.modal.options.className,hideCloseButton:e.modal.options.hideCloseButton,onPointerDownOutside:e.modal.options.onPointerDownOutside,onEscapeKeyDown:e.modal.options.onEscapeKeyDown,open:n,onOpenChange:a,children:(0,r.jsx)(e.modal.Component,{dismiss:async()=>(a(!1),Promise.resolve())})})}y.useModal=function(){let e=j.useActions(),[t]=s.useState(()=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,a.x0)();e.set(e=>{e.list.push({id:r,Component:t,options:n})})});return t},y.useApi=function(){let e=j.useActions(),[t]=s.useState(()=>({dismiss_all(){e.set(e=>{e.list=[]})}}));return t};let j=(0,g.L)("Modal",(e,t)=>({list:[]}),{debug:!1})},30579:function(e,t,n){function r(){if("Notification"in window)return Notification.permission}async function s(){if(!await c())return!1;let e=await navigator.serviceWorker.ready;return await e.pushManager.getSubscription()}async function a(e){let t=await s();return t?e.pathfinder.check_push_notification({subscription:t}):{exists:!1}}function i(e){return e.pathfinder.disable_push_notifications()}async function o(e,t){await c();let n=r();if(!n||"denied"===n)return;if("granted"===n){try{if((await a(e)).exists){await e.pathfinder.enable_push_notifications();return}await l(e),null==t||t("granted")}catch(e){console.error("User subscription failed:",e)}return}let s=await Notification.requestPermission();t&&t(s),"granted"===s&&await l(e)}async function l(e){let t=await navigator.serviceWorker.ready,n=function(e){let t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),s=new Uint8Array(r.length);for(let e=0;e<r.length;++e)s[e]=r.charCodeAt(e);return s}("BKRwMROEb5yhBF2v0hi6xU4_8tvIu3CuL_C0yrOnGA_NhndoLSxVtweTUnPyq8ksF4YWbDC4QJkPyLoOQJ4lZis");try{let r=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n});await e.pathfinder.push_notifications_subscribe({subscription:r})}catch(e){console.error("User subscription failed:",e)}}async function c(){return"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")}n.d(t,{_V:function(){return o},dq:function(){return i},qO:function(){return r}}),n(9271),n(22646)},81819:function(e,t,n){n.d(t,{Zr:function(){return eU},Mx:function(){return eK}});var r=n(44259),s=n(9271),a=n(36853),i=n(93953),o=n.n(i),l=n(88492),c=n(22646),u=n(6248),d=n(29491),f=n(21699),m=n(94191),p=n(38328),x=n(83986),h=n(33237),v=n(43146),g=n(43067),y=n(51187),w=n(71913);function b(){let e=d.u.useModal();return(t,n)=>{e(e=>(0,r.jsx)(j,{title:t,confirm:n,dismiss:e.dismiss}),{className:"sm:w-96"})}}let j=e=>{let{title:t,confirm:n,dismiss:a}=e,[i,o]=s.useState(!1);return(0,r.jsxs)("div",{className:"flex flex-col gap-1 p-4 pb-10 sm:pb-4",children:[(0,r.jsx)(y.V.Title,{children:(0,r.jsx)(u.H,{className:"flex text-center text-xl",message:t})}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Are you sure? This action cannot be undone."}),(0,r.jsxs)("div",{className:"mt-8 flex justify-end gap-2",children:[(0,r.jsx)(g.z,{variant:"outline",onClick:a,children:"Cancel"}),(0,r.jsx)(g.z,{variant:"destructive",className:"w-24",onClick:async()=>{o(!0),await n(),o(!1),a()},children:i?(0,r.jsx)(w.$,{className:"size-5"}):"Confirm"})]})]})};var N=n(36670);function C(e){return(0,r.jsx)("div",{className:(0,N.cn)(e.className,"flex flex-col gap-1 rounded-lg border border-token-border-light p-4",!e.col&&"md:flex-row md:items-center md:justify-between"),children:e.children})}var _=n(90722),k=n(96389),S=n(7583);function z(e){let{app:t,onBack:n}=e,a=c.S.useApi(),i=m.NL(),[o,l]=s.useState(!1),d=b(),f=async()=>{await a.pathfinder.apps_clear_app_settings({app_id:t.id}),await i.invalidateQueries({queryKey:["app",t.id]})},p=async()=>{t.domain&&(await a.pathfinder.clear_user_context_for_domain({domain:t.domain}),await i.invalidateQueries({queryKey:["user_context"]}))};return(0,r.jsxs)("div",{className:"flex h-full max-h-[80svh] min-h-[80svh] flex-col gap-1 lg:max-h-[640px] lg:min-h-[640px]",children:[(0,r.jsx)("div",{className:"flex items-center border-b px-4 pb-4 lg:p-4",children:(0,r.jsxs)(g.z,{variant:"ghost",onClick:n,className:"-ml-1 !h-fit !p-0 hover:!bg-transparent",children:[(0,r.jsx)(_.s,{className:"color-muted-foreground mr-1 size-4"}),(0,r.jsx)(v.y,{app:t,className:"mr-2 size-5"}),(0,r.jsx)("h4",{className:"text-lg font-semibold",children:t.name})]})}),(0,r.jsx)("div",{className:"flex size-full overflow-scroll p-6",children:(0,r.jsxs)("div",{className:"flex size-full flex-col gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-semibold",children:["Personalize ",t.name]}),(0,r.jsx)("p",{className:"mb-4 text-sm text-muted-foreground",children:"Share website-specific information to help Operator complete tasks."}),o?(0,r.jsx)(E,{app:t,setEditing:l}):(0,r.jsx)(A,{app:t,setEditing:l})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("p",{className:"mb-2 text-sm font-semibold",children:"Manage"}),(0,r.jsxs)(C,{className:"relative justify-start !gap-0 divide-y !p-0",col:!0,children:[(0,r.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-3 xs:flex-row xs:items-center xs:gap-1",children:[(0,r.jsx)(u.H,{className:"whitespace-nowrap text-sm font-medium",message:"Browsing data"}),(0,r.jsx)(g.z,{variant:"outline",className:"!h-auto rounded-full !py-1",onClick:()=>d("Clear site data",p),children:"Log out and clear site data"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-3 xs:flex-row xs:items-center xs:gap-1",children:[(0,r.jsx)(u.H,{className:"whitespace-nowrap text-sm font-medium",message:"Personalization"}),(0,r.jsx)(g.z,{variant:"destructive-outline",className:"!h-auto rounded-full !py-1",onClick:()=>d("Delete personalization",f),children:"Delete personalization"})]})]})]})]})})]})}function E(e){let{app:t,setEditing:n}=e,s=c.S.useApi(),a=m.NL(),i=p.D({mutationFn:s.pathfinder.apps_update_app_settings,onSuccess:async()=>{await a.invalidateQueries({queryKey:["app",t.id]}),await a.invalidateQueries({queryKey:["pathfinder_apps_list"]}),n(!1)}}),o=[...t.app_settings_fields,{name:"Additional instructions",description:"Additional instructions",type:"text"}],l=h.z.object(o.reduce((e,t)=>(e[t.name]=h.z.string().max(1e3,"Cannot be over 1000 characters").optional(),e),{})),d=o.reduce((e,n)=>{var r,s;return e[n.name]=null!==(s=null===(r=t.user_settings)||void 0===r?void 0:r[n.name])&&void 0!==s?s:"",e},{}),{control:v,handleSubmit:y,formState:{errors:b,isDirty:j}}=(0,x.cI)({resolver:(0,f.F)(l),defaultValues:d}),N=(e,t)=>{switch(t.type){case"text":return(0,r.jsx)(S.g,{...e,className:"h-32 !max-h-full min-h-32 w-full !resize-y !overflow-auto bg-background !py-1 !text-sm placeholder:font-sans placeholder:text-sm"});case"string":return(0,r.jsx)(k.I,{type:"text",...e,className:"w-full text-sm placeholder:font-sans placeholder:text-sm"})}};return(0,r.jsx)(C,{className:"relative justify-start",col:!0,children:(0,r.jsxs)("form",{onSubmit:y(e=>{i.mutate({app_id:t.id,app_manual:t.app_manual,user_settings:e})}),className:"h-full",children:[(0,r.jsx)("div",{className:"flex flex-col gap-3",children:o.map(e=>{var t;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-1 whitespace-nowrap text-xs font-semibold text-muted-foreground",children:(0,r.jsx)(u.H,{message:e.name})}),(0,r.jsx)(x.Qr,{name:e.name,control:v,render:t=>{let{field:n}=t;return N(n,e)}}),b[e.name]&&(0,r.jsx)("p",{className:"text-xs text-red-500",children:null===(t=b[e.name])||void 0===t?void 0:t.message})]},e.name)})}),(0,r.jsxs)("div",{className:"mt-5 flex justify-end gap-2",children:[(0,r.jsx)(g.z,{type:"button",variant:"secondary",onClick:()=>n(!1),children:(0,r.jsx)(u.H,{message:"Cancel"})}),(0,r.jsx)(g.z,{type:"submit",disabled:!j||i.isPaused,className:"w-20",children:i.isPending?(0,r.jsx)(w.$,{className:"size-4"}):"Save"})]})]})})}function A(e){let{app:t,setEditing:n}=e,s=[...t.app_settings_fields,{name:"Additional instructions",type:"text",description:""}],a=e=>{var n,s;return(0,r.jsxs)("div",{className:"gap-1",children:[(0,r.jsx)("div",{className:"whitespace-nowrap text-xs font-semibold text-muted-foreground",children:(0,r.jsx)(u.H,{message:e.name})}),(0,r.jsx)("div",{className:"line-clamp-5 overflow-hidden text-ellipsis whitespace-pre text-sm",children:(null===(s=t.user_settings)||void 0===s?void 0:null===(n=s[e.name])||void 0===n?void 0:n.trim())?t.user_settings[e.name]:"Not set"})]},e.name)};return(0,r.jsxs)(C,{className:"relative justify-start",col:!0,children:[(0,r.jsx)(g.z,{autoFocus:!0,type:"button",variant:"ghost",className:"absolute right-3 top-3 h-fit rounded-full border border-border py-1",onClick:()=>{n(!0)},children:(0,r.jsx)(u.H,{message:"Edit"})}),(0,r.jsx)("div",{className:"flex flex-col gap-3",children:s.map(e=>a(e))})]})}var T=n(34628),L=n(13200);function R(e){let{setAppId:t}=e;return(0,r.jsx)("div",{className:"flex size-full gap-6 pb-10 pr-6",children:(0,r.jsx)("div",{className:"flex w-full flex-col gap-2",children:(0,r.jsx)(P,{setAppId:t})})})}function P(e){let{setAppId:t}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-5 pt-4",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold",children:"Websites"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Provide custom instructions for how Operator should interact with websites."})]}),(0,r.jsx)(M,{setAppID:t})]})}let M=e=>{var t;let{setAppID:n}=e,s=c.S.useApi(),i=null===(t=a.a({queryKey:["pathfinder_apps_list"],queryFn:s.pathfinder.apps_list}).data)||void 0===t?void 0:t.apps;if(!i)return(0,r.jsx)("div",{className:"flex w-full items-center justify-center py-4",children:(0,r.jsx)(w.$,{className:"size-6 text-muted-foreground"})});{let e=i.filter(e=>!e.app_categories.some(e=>e===T.Lf.News)),t=i.filter(e=>e.app_categories.some(e=>e===T.Lf.News));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-cols-1 divide-y rounded-lg border",children:e.map(e=>(0,r.jsx)(D,{app:e,setAppId:n},e.id))}),(0,r.jsx)("h2",{className:"text-sm font-semibold",children:"News"}),(0,r.jsx)("div",{className:"grid grid-cols-1 divide-y rounded-lg border",children:t.map(e=>(0,r.jsx)(D,{app:e,setAppId:n},e.id))})]})}},D=e=>{let{app:t,setAppId:n}=e;return(0,r.jsxs)("div",{className:"flex cursor-pointer items-center p-4 text-sm",onClick:()=>n(t.id),children:[(0,r.jsx)(v.y,{app:t,className:"mr-3 size-5"}),t.name,(0,r.jsx)(L._,{className:"color-muted-foreground ml-auto size-4"})]},t.id)};function O(e){let{onBack:t}=e,{setViewSiteData:n}=s.useContext(eK),a=c.S.useApi(),i=m.NL(),o=b(),l=async()=>{await a.pathfinder.clear_user_context(),await i.invalidateQueries({queryKey:["user_context"]})};return(0,r.jsxs)("div",{className:"flex h-full max-h-[80svh] min-h-[80svh] flex-col gap-1 lg:max-h-[640px] lg:min-h-[640px]",children:[(0,r.jsx)("div",{className:"flex items-center border-b px-4 pb-4 lg:p-4",children:(0,r.jsxs)(g.z,{variant:"ghost",onClick:t,className:"-ml-1 !h-fit !p-0 hover:!bg-transparent",children:[(0,r.jsx)(_.s,{className:"color-muted-foreground mr-1 size-4"}),(0,r.jsx)("h4",{className:"text-lg font-semibold",children:"Browsing data"})]})}),(0,r.jsx)("div",{className:"scrollbar-gutter-stable flex size-full overflow-scroll p-6 pr-3",children:(0,r.jsxs)("div",{className:"flex size-full flex-col gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mb-2 text-sm font-semibold",children:"Delete"}),(0,r.jsx)(C,{className:"relative justify-start !gap-0 divide-y !p-0",col:!0,children:(0,r.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-3 sm:flex-row sm:items-center sm:gap-1",children:[(0,r.jsx)(u.H,{className:"whitespace-nowrap text-sm font-medium",message:"Browsing data"}),(0,r.jsx)(g.z,{variant:"destructive-outline",className:"!h-auto rounded-full !py-1",onClick:()=>o("Delete all site data",l),children:"Delete data and log out of all sites"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,r.jsx)("p",{className:"mb-2 text-sm font-semibold",children:"Site data"})}),(0,r.jsx)(C,{className:"relative justify-start !gap-0 divide-y !p-0",col:!0,children:(0,r.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-3 sm:flex-row sm:items-center sm:gap-1",children:[(0,r.jsx)(u.H,{className:"whitespace-nowrap text-sm font-medium",message:"Site Data"}),(0,r.jsxs)(g.z,{variant:"ghost",className:"!h-auto rounded-full !px-0 !py-1 hover:!bg-transparent",onClick:()=>n(!0),children:["Manage",(0,r.jsx)(L._,{className:"color-muted-foreground ml-1 size-4"})]})]})})]})]})})]})}var H=n(56792),I=n(69705),F=n(30529),K=n(55471);let U=s.forwardRef((e,t)=>{let{color:n="currentColor",...s}=e;return(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,ref:t,children:(0,r.jsx)("path",{fill:n,d:"M15 5C14.4477 5 14 4.55228 14 4C14 3.44772 14.4477 3 15 3H20C20.5523 3 21 3.44772 21 4V9C21 9.55228 20.5523 10 20 10C19.4477 10 19 9.55228 19 9V6.41421L13.7071 11.7071C13.3166 12.0976 12.6834 12.0976 12.2929 11.7071C11.9024 11.3166 11.9024 10.6834 12.2929 10.2929L17.5858 5H15ZM9.7587 4H10C10.5523 4 11 4.44772 11 5C11 5.55228 10.5523 6 10 6H9.8C8.94342 6 8.36113 6.00078 7.91104 6.03755C7.47262 6.07337 7.24842 6.1383 7.09202 6.21799C6.7157 6.40973 6.40973 6.71569 6.21799 7.09202C6.1383 7.24842 6.07337 7.47262 6.03755 7.91104C6.00078 8.36113 6 8.94342 6 9.8V14.2C6 15.0566 6.00078 15.6389 6.03755 16.089C6.07337 16.5274 6.1383 16.7516 6.21799 16.908C6.40973 17.2843 6.7157 17.5903 7.09202 17.782C7.24842 17.8617 7.47262 17.9266 7.91104 17.9624C8.36113 17.9992 8.94342 18 9.8 18H14.2C15.0566 18 15.6389 17.9992 16.089 17.9624C16.5274 17.9266 16.7516 17.8617 16.908 17.782C17.2843 17.5903 17.5903 17.2843 17.782 16.908C17.8617 16.7516 17.9266 16.5274 17.9624 16.089C17.9992 15.6389 18 15.0566 18 14.2V14C18 13.4477 18.4477 13 19 13C19.5523 13 20 13.4477 20 14V14.2413C20 15.0463 20 15.7106 19.9558 16.2518C19.9099 16.8139 19.8113 17.3306 19.564 17.816C19.1805 18.5686 18.5686 19.1805 17.816 19.564C17.3306 19.8113 16.8139 19.9099 16.2518 19.9558C15.7106 20 15.0463 20 14.2413 20H9.75868C8.95372 20 8.28936 20 7.74817 19.9558C7.18608 19.9099 6.66937 19.8113 6.18404 19.564C5.43139 19.1805 4.81947 18.5686 4.43597 17.816C4.18868 17.3306 4.09012 16.8139 4.04419 16.2518C3.99998 15.7106 3.99999 15.0463 4 14.2413V9.7587C3.99999 8.95373 3.99998 8.28937 4.04419 7.74817C4.09012 7.18608 4.18868 6.66937 4.43597 6.18404C4.81947 5.43139 5.43139 4.81947 6.18404 4.43597C6.66937 4.18868 7.18608 4.09012 7.74817 4.04419C8.28937 3.99998 8.95373 3.99999 9.7587 4Z"})})});U.displayName="OpenNewTab";var B=n(60472),q=n(46490);let V=q.fC,W=q.ZA,Z=q.B4,G=s.forwardRef((e,t)=>{let{className:n,children:s,...a}=e;return(0,r.jsxs)(q.xz,{ref:t,className:(0,N.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...a,children:[s,(0,r.jsx)(q.JO,{asChild:!0,children:(0,r.jsx)(B.jnn,{className:"size-4 shrink-0 opacity-50"})})]})});G.displayName=q.xz.displayName;let $=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(q.u_,{ref:t,className:(0,N.cn)("flex cursor-default items-center justify-center py-1",n),...s,children:(0,r.jsx)(B.g8U,{})})});$.displayName=q.u_.displayName;let Q=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(q.$G,{ref:t,className:(0,N.cn)("flex cursor-default items-center justify-center py-1",n),...s,children:(0,r.jsx)(B.v4q,{})})});Q.displayName=q.$G.displayName;let Y=s.forwardRef((e,t)=>{let{className:n,children:s,position:a="popper",...i}=e;return(0,r.jsx)(q.h_,{children:(0,r.jsxs)(q.VY,{ref:t,className:(0,N.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:a,...i,children:[(0,r.jsx)($,{}),(0,r.jsx)(q.l_,{className:(0,N.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(Q,{})]})})});Y.displayName=q.VY.displayName,s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(q.__,{ref:t,className:(0,N.cn)("px-2 py-1.5 text-sm font-semibold",n),...s})}).displayName=q.__.displayName;let J=s.forwardRef((e,t)=>{let{className:n,children:s,...a}=e;return(0,r.jsxs)(q.ck,{ref:t,className:(0,N.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...a,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(q.wU,{children:(0,r.jsx)(B.nQG,{className:"size-4"})})}),(0,r.jsx)(q.eT,{children:s})]})});J.displayName=q.ck.displayName,s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(q.Z0,{ref:t,className:(0,N.cn)("-mx-1 my-1 h-px bg-muted",n),...s})}).displayName=q.Z0.displayName;var X=n(26547),ee=n(30579),et=n(94101),en=n(63823),er=n(28705);let es=(0,s.forwardRef)(function(e,t){let{onChange:n,enabled:a,label:i,disabled:o,icon:l=null,size:c="normal",id:u,testId:d,backgroundColor:f="black"}=e,m=(0,s.useCallback)(()=>{null==n||n(!a)},[a,n]);return(0,r.jsx)(er.fC,{ref:t,id:u,checked:a,disabled:o,onCheckedChange:m,"aria-label":i,className:(0,N.cn)("focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-token-text-secondary focus-visible:ring-offset-2 focus-visible:radix-state-checked:ring-black focus-visible:dark:ring-token-main-surface-primary focus-visible:dark:radix-state-checked:ring-green-600",o?"cursor-not-allowed opacity-50":"cursor-pointer","green"===f?"bg-green-600/15 radix-state-checked:bg-green-600":"bg-gray-200 radix-state-checked:bg-black dark:border dark:border-token-border-medium dark:bg-transparent","relative shrink-0 rounded-full dark:radix-state-checked:border-green-600 dark:radix-state-checked:bg-green-600","normal"===c?"h-[20px] w-[32px]":"large"===c?"h-[32px] w-[54px]":"h-[19px] w-[30px]"),"data-testid":d,children:(0,r.jsx)(er.bU,{className:(0,N.cn)("flex items-center justify-center rounded-full","translate-x-0.5 transition-transform duration-100 will-change-transform","bg-white","normal"===c?"size-[16px] radix-state-checked:translate-x-[14px]":"large"===c?"size-[26px] radix-state-checked:translate-x-[24px]":"size-[15px] radix-state-checked:translate-x-[13px]"),children:l})})});var ea=n(64860);function ei(){let e=(0,et._)(["text-xs text-token-text-secondary pr-12 mt-3"]);return ei=function(){return e},e}let eo=en.Z.div(ei());function el(e){let{label:t,disabled:n,enabled:s,onChange:a,description:i,toggleTooltip:o,isLoading:l=!1,testId:c}=e,u=(0,r.jsx)(es,{disabled:n,enabled:s,onChange:a,label:t,size:"normal",testId:c});return null!==o&&(u=(0,r.jsxs)(ea.u.Root,{disableHoverableContent:!0,children:[(0,r.jsx)(ea.u.Trigger,{asChild:!0,children:u}),(0,r.jsx)(ea.u.Content,{sideOffset:2,side:"top",children:o})]})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{children:t}),l?(0,r.jsx)(w.$,{}):u]}),void 0!==i&&(0,r.jsx)(eo,{children:i})]})}var ec=n(57319);function eu(){let[e,t]=(0,s.useState)(()=>(0,ee.qO)()),[n,a]=(0,s.useState)("granted"===e),[i,o]=(0,s.useState)("denied"===e),[l,d]=(0,s.useState)(!1),f=c.S.useApi();async function m(n){if(a(n),n){"granted"!==e&&d(!0);try{await (0,ee._V)(f,e=>{d(!1),ec.U.addAction({name:"settings.notifications.toggle",context:{type:"enable",permission:e}}),a("granted"===e),o("denied"===e),t(e)})}catch(e){ec.U.addAction({name:"settings.notifications.toggle",context:{type:"enable",result:"error",error:e instanceof Error?e.message:void 0}}),a(!1)}}else try{await (0,ee.dq)(f),ec.U.addAction({name:"settings.notifications.toggle",context:{type:"disable",result:"success"}})}catch(e){ec.U.addAction({name:"settings.notifications.toggle",context:{type:"disable",result:"error",error:e instanceof Error?e.message:void 0}}),a(!0)}}return console.log("enabled",n),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"pb-0 pt-4 text-sm font-semibold",children:"Notifications"}),(0,r.jsx)(C,{children:(0,r.jsxs)("div",{className:"flex flex-1 flex-col justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,r.jsx)("div",{className:"whitespace-nowrap text-sm",children:(0,r.jsx)(u.H,{message:"Browser notifications"})}),(0,r.jsx)(el,{label:"",disabled:i,enabled:n,onChange:m})]}),i&&(0,r.jsx)(eo,{className:"text-red-500",children:(0,r.jsx)(u.H,{message:"Notifications are disabled in your browser. Please enable them in your browser settings."})})]})}),l&&(0,r.jsx)("div",{className:"fixed inset-0 z-100 bg-background/70"})]})}function ed(){return(0,r.jsx)("div",{className:"flex size-full gap-6 pb-10 pr-6",children:(0,r.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,r.jsx)(ef,{}),(0,r.jsx)(eu,{}),(0,r.jsx)(em,{}),(0,r.jsx)(ep,{})]})})}function ef(){let e=(0,K.F)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"pb-0 pt-4 text-sm font-semibold",children:"Appearance"}),(0,r.jsxs)(C,{children:[(0,r.jsx)("div",{className:"whitespace-nowrap text-sm",children:(0,r.jsx)(u.H,{message:"Theme"})}),(0,r.jsxs)(V,{value:e.theme,onValueChange:e.setTheme,children:[(0,r.jsx)(G,{className:"size-fit border-none !px-0 py-0 shadow-none outline-none focus:outline-none focus:ring-0 sm:px-3",children:(0,r.jsx)(Z,{})}),(0,r.jsx)(Y,{align:"end",children:(0,r.jsx)(W,{children:e.themes.map(e=>(0,r.jsx)(J,{value:e,className:"cursor-pointer",children:e.charAt(0).toUpperCase()+e.slice(1)},e))})})]})]})]})}function em(){var e,t;let n=null===(e=(0,X.a)().data)||void 0===e?void 0:e.user,[a,i]=s.useState(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"pb-0 pt-4 text-sm font-semibold",children:"Account"}),(0,r.jsxs)(C,{className:"relative justify-start !gap-0 divide-y !p-0",col:!0,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 whitespace-nowrap p-4 text-sm",children:[(0,r.jsx)(u.H,{message:"Email"}),(0,r.jsx)(u.H,{message:null!==(t=null==n?void 0:n.email)&&void 0!==t?t:"",className:"max-w-full overflow-hidden text-ellipsis"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,r.jsx)("div",{className:"whitespace-nowrap text-sm",children:(0,r.jsx)(u.H,{message:"Account settings"})}),(0,r.jsxs)(I.default,{href:"https://chatgpt.com/#settings",className:"flex flex-row items-center gap-2 py-1 text-sm",target:"_blank",rel:"noreferrer",children:["Manage on ChatGPT ",(0,r.jsx)(U,{className:"size-4"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,r.jsx)(u.H,{className:"whitespace-nowrap text-sm font-medium",message:"Log out"}),(0,r.jsx)(g.z,{variant:"outline",className:"!h-auto !w-24 rounded-full !py-1",onClick:async()=>{i(!0),await (0,F.signOut)({callbackUrl:"/"})},children:a?(0,r.jsx)(w.$,{className:"size-5"}):"Log out"})]})]})]})}function ep(){var e,t;let n=c.S.useApi(),s=null===(e=(0,X.a)().data)||void 0===e?void 0:e.user,a=m.NL(),i=h.z.object({instructions:h.z.string().max(1e3,"Instructions cannot exceed 1000 characters").optional()}),{control:o,handleSubmit:l,reset:d,formState:{errors:v,isDirty:y}}=(0,x.cI)({resolver:(0,f.F)(i),defaultValues:{instructions:null!==(t=null==s?void 0:s.personalization.custom_instructions)&&void 0!==t?t:""}}),b=p.D({mutationFn:n.pathfinder.update_user_settings,mutationKey:["me"],onSuccess:e=>{a.setQueryData(["me"],(0,H.Uy)(t=>{t.user&&(t.user.personalization.custom_instructions=e.personalization.custom_instructions)})),document.activeElement&&document.activeElement.blur()}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"pb-0 pt-4 text-sm font-semibold",children:"Custom instructions"}),(0,r.jsx)("p",{className:"mb-2 text-sm text-muted-foreground",children:"What would you like Operator to know to complete tasks more smoothly? Operator will have access to this information for all tasks."}),(0,r.jsxs)("form",{onSubmit:l(e=>{b.mutate({custom_instructions:e.instructions})}),children:[(0,r.jsx)(x.Qr,{name:"instructions",control:o,render:e=>{let{field:t}=e;return(0,r.jsxs)("div",{className:"group mb-3 flex h-40 max-h-full min-h-40 resize-y flex-col overflow-auto rounded-lg border border-input",children:[(0,r.jsx)(S.g,{...t,className:"flex !h-full !max-h-full !overflow-auto border-0 bg-background !p-4 !text-sm shadow-none placeholder:text-sm group-focus-within:rounded-b-none",placeholder:"Enter your custom instructions here..."}),(0,r.jsxs)("div",{className:"hidden w-full justify-end gap-2 p-4 group-focus-within:flex",children:[(0,r.jsx)(g.z,{type:"button",variant:"outline",onClick:e=>{e.currentTarget.blur(),d()},children:(0,r.jsx)(u.H,{message:"Cancel"})}),(0,r.jsx)(g.z,{type:"submit",disabled:!y||b.isPaused,className:"w-20",children:b.isPending?(0,r.jsx)(w.$,{className:"size-4"}):"Save"})]})]})}}),v.instructions&&(0,r.jsx)("p",{className:"text-xs text-red-500",children:v.instructions.message})]})]})}function ex(){return(0,r.jsx)("div",{className:"flex size-full gap-6 pb-10 pr-6",children:(0,r.jsx)("div",{className:"flex w-full flex-col gap-2",children:(0,r.jsx)(eh,{})})})}function eh(){let{setViewBrowsingData:e}=s.useContext(eK),t=b(),n=c.S.useApi(),a=async()=>{await n.pathfinder.delete_all_conversations()};return(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("h2",{className:"pb-0 pt-4 text-sm font-semibold",children:"Privacy and security"}),(0,r.jsxs)(C,{className:"relative justify-start !gap-0 divide-y !p-0",col:!0,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,r.jsx)(u.H,{className:"max-w-32 text-sm font-medium sm:max-w-full",message:"Improve the model for everyone"}),(0,r.jsxs)(I.default,{href:"https://chatgpt.com/#settings/DataControls",className:"flex flex-row items-center gap-2 text-sm",target:"_blank",rel:"noreferrer",children:["Manage on ChatGPT ",(0,r.jsx)(U,{className:"size-4"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,r.jsx)(u.H,{className:"whitespace-nowrap text-sm font-medium",message:"Browsing data"}),(0,r.jsxs)(g.z,{variant:"ghost",className:"!h-auto rounded-full !px-0 !py-1 hover:!bg-transparent",onClick:()=>e(!0),children:["Manage",(0,r.jsx)(L._,{className:"color-muted-foreground ml-1 size-4"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,r.jsx)(u.H,{className:"whitespace-nowrap text-sm font-medium",message:"Delete all Operator chats"}),(0,r.jsx)(g.z,{variant:"destructive",className:"!h-auto !w-24 rounded-full !py-1",onClick:()=>t("Delete all Operator chats",a),children:"Delete all"})]})]})]})}var ev=n(1819);let eg=e=>{var t;let{domain:n,alt:a,className:i}=e,[o,l]=s.useState(!1),c=(0,r.jsx)(ev.T,{className:(0,N.cn)(i,"text-muted-foreground")});return(0,r.jsxs)(r.Fragment,{children:[!o&&c,(0,r.jsx)("img",{src:"/api/favicon?domain=".concat(n),alt:null!==(t=null!=a?a:n)&&void 0!==t?t:"",className:(0,N.cn)(!o&&"hidden",i),width:64,height:64,onLoad:()=>l(!0)})]})},ey=s.forwardRef((e,t)=>{let{color:n="currentColor",...s}=e;return(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,ref:t,children:(0,r.jsx)("path",{fill:n,d:"M12 3C12.5523 3 13 3.44772 13 4L13 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13L13 13L13 20C13 20.5523 12.5523 21 12 21C11.4477 21 11 20.5523 11 20L11 13L4 13C3.44772 13 3 12.5523 3 12C3 11.4477 3.44772 11 4 11L11 11L11 4C11 3.44772 11.4477 3 12 3Z"})})});ey.displayName="Plus";var ew=n(87634);let eb=e=>{try{let t=e.includes("://")?e:"https://".concat(e),{hostname:n}=new URL(t);return n.includes(".")}catch(e){return!1}};var ej=n(61805),eN=n(79866);function eC(e){var t,n,i,o;let{prompt:l,conversationId:d,onBack:v}=e,y=s.useRef(null),j=c.S.useApi(),N=b(),z=m.NL(),E=(0,eN.B)(),A=null!=d?d:"",T=a.a({queryKey:["generate_prompt",A],queryFn:()=>j.pathfinder.prompts_generate(A),enabled:null!==d&&d.length>0}),L=h.z.object({title:h.z.string().min(1,"Title cannot be empty"),detailed_instructions:h.z.string().max(1e3,"Instructions cannot exceed 1000 characters").optional(),websites:h.z.array(h.z.object({website:h.z.string().min(1,"Website cannot be empty")}))}),{control:R,handleSubmit:P,formState:{errors:M,dirtyFields:D,isDirty:O,isValid:H},reset:I,setError:F,clearErrors:K,trigger:U,setValue:B}=(0,x.cI)({resolver:(0,f.F)(L),defaultValues:{title:null==l?void 0:l.title,detailed_instructions:null!==(o=null==l?void 0:null===(t=l.detailed_instructions)||void 0===t?void 0:t.content)&&void 0!==o?o:"",websites:null==l?void 0:l.websites.map(e=>{var t,n;return{website:null!==(n=null===(t=E[e])||void 0===t?void 0:t.domain)&&void 0!==n?n:""}})}});s.useEffect(()=>{if(T.data){var e,t;B("title",T.data.title,{shouldDirty:!0}),B("detailed_instructions",null!==(t=null===(e=T.data.detailed_instructions)||void 0===e?void 0:e.content)&&void 0!==t?t:"",{shouldDirty:!0}),B("websites",T.data.website_domains.map(e=>({website:e})),{shouldDirty:!0})}},[T.data,B]);let{fields:q,append:V,remove:W}=(0,x.Dq)({control:R,name:"websites"}),[Z,G]=s.useState(""),$=p.D({mutationFn:j.pathfinder.prompts_update,onError:e=>{if(e instanceof ej.i){var t;F("root",{message:null===(t=e.json.detail)||void 0===t?void 0:t.text,type:"manual"})}},onSuccess:async e=>{var t,n;document.activeElement&&document.activeElement.blur(),await z.invalidateQueries({queryKey:["prompt",e.id]}),await z.invalidateQueries({queryKey:["prompts_list"]}),await z.invalidateQueries({queryKey:["pathfinder_apps_list"]}),I({title:e.title,detailed_instructions:null!==(n=null===(t=e.detailed_instructions)||void 0===t?void 0:t.content)&&void 0!==n?n:"",websites:e.websites.map(e=>{var t,n;return{website:null!==(n=null===(t=E[e])||void 0===t?void 0:t.domain)&&void 0!==n?n:""}})}),v()}}),Q=p.D({mutationFn:j.pathfinder.prompts_create,onError:e=>{if(e instanceof ej.i){var t;F("root",{message:null===(t=e.json.detail)||void 0===t?void 0:t.text,type:"manual"})}},onSuccess:async e=>{var t,n;await z.invalidateQueries({queryKey:["prompt",null==l?void 0:l.id]}),await z.invalidateQueries({queryKey:["prompts_list"]}),await z.invalidateQueries({queryKey:["pathfinder_apps_list"]}),I({title:e.title,detailed_instructions:null!==(n=null===(t=e.detailed_instructions)||void 0===t?void 0:t.content)&&void 0!==n?n:"",websites:e.websites.map(e=>{var t,n;return{website:null!==(n=null===(t=E[e])||void 0===t?void 0:t.domain)&&void 0!==n?n:""}})}),v()}}),Y=async()=>{l&&(await j.pathfinder.prompts_delete(l.id),await z.invalidateQueries({queryKey:["prompts_list"]}),v())},J=()=>{let e=Z.trim();e&&(V({website:e}),G(""))},X=$.isPending||Q.isPending;return(0,r.jsxs)("form",{className:"flex size-full max-h-[80svh] min-h-[80svh] flex-col justify-between overflow-hidden lg:max-h-[640px] lg:min-h-[640px]",onSubmit:P(e=>{if(l){let n={prompt_id:l.id};if(D.title&&(n.title=e.title),D.detailed_instructions){var t;n.detailed_instructions={content:null!==(t=e.detailed_instructions)&&void 0!==t?t:""}}if(D.websites&&(n.website_domains=e.websites.map(e=>e.website)),""!==Z){if(!eb(Z)){F("websites",{message:"Invalid website domain",type:"manual"});return}void 0===n.website_domains?n.website_domains=[...e.websites.map(e=>e.website),Z]:n.website_domains.push(Z)}$.mutate(n)}else{let t=e.websites.map(e=>e.website);if(""!==Z){if(!eb(Z)){F("websites",{message:"Invalid website domain",type:"manual"});return}t.push(Z)}Q.mutate({title:e.title,detailed_instructions:e.detailed_instructions?{content:e.detailed_instructions}:void 0,website_domains:t})}}),children:[(0,r.jsxs)("div",{className:"flex size-full flex-col gap-2 overflow-hidden",children:[(0,r.jsx)("div",{className:"flex items-center justify-start border-b px-6 pb-4 lg:p-4",children:(0,r.jsxs)(g.z,{onClick:v,"aria-label":"Back",variant:"ghost",className:"-ml-1 !h-fit !p-0 hover:!bg-transparent",children:[(0,r.jsx)(_.s,{className:"color-muted-foreground mr-1 size-4"}),(0,r.jsx)("h4",{className:"text-lg font-semibold",children:l?"Edit task":"Save task"})]})}),(0,r.jsxs)("div",{className:"flex flex-col gap-6 overflow-auto px-6 pb-16 pt-3",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("label",{className:"whitespace-nowrap text-sm font-medium",children:"Title"}),T.isFetching?(0,r.jsx)("div",{className:"rounded-md border border-input px-3 py-1.5 shadow-sm",children:(0,r.jsx)(w.$,{className:"size-5"})}):(0,r.jsx)(k.I,{type:"text",...R.register("title"),placeholder:"Title"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("label",{className:"whitespace-nowrap text-sm font-medium",children:["Detailed instructions"," ",(0,r.jsx)("span",{className:"font-normal text-muted-foreground",children:"(optional)"})]}),T.isFetching?(0,r.jsx)("div",{className:"h-32 min-h-32 rounded-md border border-input px-3 py-2 shadow-sm",children:(0,r.jsx)(w.$,{className:"size-5"})}):(0,r.jsx)(x.Qr,{name:"detailed_instructions",control:R,render:e=>{let{field:t}=e;return(0,r.jsx)(S.g,{...t,className:"h-36 !max-h-full min-h-36 w-full !resize-y !overflow-auto border border-input bg-background !p-4 !text-sm placeholder:font-sans placeholder:text-sm",placeholder:"How should Operator do this task? What information would be helpful?"})}}),M.detailed_instructions&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:M.detailed_instructions.message})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("label",{className:"whitespace-nowrap text-sm",children:[(0,r.jsxs)("div",{className:"font-medium",children:["Websites ",(0,r.jsx)("span",{className:"font-normal text-muted-foreground",children:"(optional)"})]}),(0,r.jsx)("div",{className:"text-muted-foreground",children:"Which websites should Operator use for this task?"})]}),(0,r.jsxs)(C,{className:"relative justify-start !gap-0 divide-y !p-0",col:!0,children:[q.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-2",children:[(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(eg,{domain:e.website,alt:e.website,className:"size-5"}),(0,r.jsx)("span",{className:"text-sm",children:e.website})]}),(0,r.jsx)(g.z,{type:"button",variant:"ghost",className:"!p-1 hover:!bg-transparent",onClick:()=>W(t),children:(0,r.jsx)(ew.X,{className:"size-4"})})]},e.id)),(0,r.jsxs)("div",{className:"flex items-center gap-3 px-4 py-1",onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.focus()},children:[(0,r.jsx)(ev.T,{className:"flex size-5 shrink-0 text-muted-foreground"}),T.isFetching?(0,r.jsx)("div",{className:"-ml-3 px-3 py-1.5",children:(0,r.jsx)(w.$,{className:"size-5"})}):(0,r.jsx)(k.I,{ref:y,type:"text",className:"!border-0 !px-0 !shadow-none !outline-none !ring-0",value:Z,onChange:async e=>{G(e.target.value),K("websites"),K("root"),await U()},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),eb(Z)&&J())},placeholder:"Enter URL..."}),Z.length>0&&(0,r.jsx)(g.z,{type:"button",variant:"ghost",className:"!p-1 hover:!bg-transparent",onClick:J,disabled:!eb(Z),children:(0,r.jsx)(ey,{className:"size-5"})})]})]}),(null===(n=M.websites)||void 0===n?void 0:n.message)&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:M.websites.message}),(null===(i=M.root)||void 0===i?void 0:i.message)&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:M.root.message})]})]})]}),(0,r.jsxs)("div",{className:"flex w-full justify-between border-t p-6",children:[l&&(0,r.jsx)(g.z,{type:"button",variant:"destructive-outline",onClick:()=>N("Delete task",Y),children:(0,r.jsx)(u.H,{message:"Delete"})}),(0,r.jsxs)("div",{className:"flex w-full justify-end gap-2",children:[(0,r.jsx)(g.z,{type:"button",variant:"outline",onClick:v,children:(0,r.jsx)(u.H,{message:"Cancel"})}),(0,r.jsx)(g.z,{type:"submit",disabled:!O&&!Z||!H,className:"w-20",children:X?(0,r.jsx)(w.$,{className:"size-4"}):"Save"})]})]})]})}function e_(e){let{setPromptId:t}=e;return(0,r.jsx)("div",{className:"flex size-full gap-6 pb-10 pr-6",children:(0,r.jsx)("div",{className:"flex w-full flex-col gap-2",children:(0,r.jsx)(ek,{setPromptId:t})})})}function ek(e){var t;let{setPromptId:n}=e,s=c.S.useApi(),i=null===(t=a.a({queryKey:["prompts_list"],queryFn:s.pathfinder.prompts_list}).data)||void 0===t?void 0:t.prompts;return(0,r.jsxs)("div",{className:"flex flex-col gap-5 pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold",children:"Saved tasks"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"These tasks will appear on the homepage and are only available to you."})]}),(0,r.jsx)(g.z,{autoFocus:!0,type:"button",variant:"ghost",className:"h-fit rounded-full border border-border py-2",onClick:()=>{n("")},children:(0,r.jsx)(u.H,{message:"Create"})})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 divide-y rounded-lg border",children:(0,r.jsx)(eS,{prompts:i,setPromptId:n})})]})}let eS=e=>{let{prompts:t,setPromptId:n}=e,s=(0,eN.B)();return t?0===t.length?(0,r.jsx)("div",{className:"flex w-full items-center justify-center py-4",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No saved tasks"})}):(0,r.jsx)(r.Fragment,{children:t.map(e=>{var t;let a=e.first_website_id?null===(t=s[e.first_website_id])||void 0===t?void 0:t.domain:null;return(0,r.jsxs)("div",{className:"flex cursor-pointer items-center justify-center gap-3 p-4 text-sm",onClick:()=>n(e.id),children:[a?(0,r.jsx)(eg,{domain:a,alt:e.title,className:"size-5"}):(0,r.jsx)(ev.T,{className:"size-5 text-muted-foreground"}),e.title,(0,r.jsx)(L._,{className:"color-muted-foreground ml-auto size-4"})]},e.id)})}):(0,r.jsx)("div",{className:"flex w-full items-center justify-center py-4",children:(0,r.jsx)(w.$,{className:"size-6 text-muted-foreground"})})},ez=s.forwardRef((e,t)=>{let{color:n="currentColor",...s}=e;return(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,ref:t,children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8338 4.78537C12.0783 3.67377 13.7568 3 15.5909 3C19.3379 3 22.5 5.84379 22.5 9.5C22.5 10.6675 22.1723 11.7617 21.6035 12.7049C21.7082 13.3446 21.9041 13.9807 22.1568 14.6441C22.2777 14.9617 22.2291 15.319 22.0276 15.5928C21.8261 15.8665 21.4994 16.0192 21.1602 15.9981C20.0211 15.9272 18.9547 15.7195 17.9166 15.3624C17.3944 15.1827 17.1167 14.6137 17.2963 14.0914C17.476 13.5692 18.045 13.2915 18.5673 13.4712C18.9672 13.6088 19.3734 13.7202 19.7912 13.8061C19.6925 13.4107 19.6153 13.0038 19.5687 12.5843C19.542 12.3446 19.6029 12.1033 19.7402 11.9049C20.2241 11.2056 20.5 10.3815 20.5 9.5C20.5 7.08108 18.3709 5 15.5909 5C14.2496 5 13.0451 5.4919 12.1662 6.27698C11.7543 6.64489 11.1221 6.60924 10.7542 6.19734C10.3863 5.78544 10.4219 5.15328 10.8338 4.78537ZM8.5 10C5.65489 10 3.5 12.0948 3.5 14.5C3.5 15.3779 3.77893 16.1999 4.27013 16.899C4.41055 17.0989 4.47295 17.3433 4.44557 17.586C4.39815 18.0063 4.31955 18.4139 4.21925 18.8099C4.65229 18.7232 5.07312 18.61 5.48727 18.4697C5.72968 18.3875 5.99435 18.4015 6.22679 18.5086C6.90579 18.8216 7.67742 19 8.5 19C11.3451 19 13.5 16.9052 13.5 14.5C13.5 12.0948 11.3451 10 8.5 10ZM1.5 14.5C1.5 10.83 4.71769 8 8.5 8C12.2823 8 15.5 10.83 15.5 14.5C15.5 18.17 12.2823 21 8.5 21C7.53025 21 6.60309 20.8166 5.75878 20.4828C4.82364 20.7669 3.86215 20.9357 2.84316 20.9981C2.50317 21.0189 2.17597 20.8653 1.97489 20.5903C1.7738 20.3154 1.72649 19.957 1.84935 19.6393C2.10511 18.9779 2.3033 18.3443 2.40969 17.7075C1.83301 16.7645 1.5 15.6694 1.5 14.5Z",fill:n})})});ez.displayName="Chats";var eE=n(58973);let eA=s.forwardRef((e,t)=>{let{color:n="currentColor",...s}=e;return(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,ref:t,children:(0,r.jsx)("path",{fill:n,d:"M12 4C7.58172 4 4 7.58172 4 12C4 14.2569 4.93453 16.2954 6.43772 17.7499C7.71622 16.0791 9.73141 15 12 15C14.2686 15 16.2838 16.0791 17.5623 17.7499C19.0655 16.2954 20 14.2569 20 12C20 7.58172 16.4183 4 12 4ZM15.9632 18.9509C15.0483 17.7635 13.6126 17 12 17C10.3874 17 8.9517 17.7635 8.03677 18.9509C9.20512 19.6185 10.558 20 12 20C13.442 20 14.7949 19.6185 15.9632 18.9509ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 8C10.8954 8 10 8.89543 10 10C10 11.1046 10.8954 12 12 12C13.1046 12 14 11.1046 14 10C14 8.89543 13.1046 8 12 8ZM8 10C8 7.79086 9.79086 6 12 6C14.2091 6 16 7.79086 16 10C16 12.2091 14.2091 14 12 14C9.79086 14 8 12.2091 8 10Z"})})});eA.displayName="UserCircle";var eT=n(25403);let eL=eT.fC,eR=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(eT.aV,{ref:t,className:(0,N.cn)("inline-flex items-center justify-center rounded-lg p-1 text-muted-foreground",n),...s})});eR.displayName=eT.aV.displayName;let eP=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(eT.xz,{ref:t,className:(0,N.cn)("inline-flex items-center justify-start whitespace-nowrap rounded-lg px-3 py-1 text-sm font-medium transition-all focus:ring-0 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-subtle-background",n),...s})});eP.displayName=eT.xz.displayName;let eM=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(eT.VY,{ref:t,className:(0,N.cn)("focus:ring-none mt-2 focus-visible:outline-none",n),...s})});eM.displayName=eT.VY.displayName;var eD=n(4466),eO=n(73565),eH=n(83346);function eI(e){var t,n,s,i;let{onBack:o}=e,l=c.S.useApi(),d=a.a({queryKey:["user_context"],queryFn:l.pathfinder.get_user_context}),f=m.NL(),p=null!==(s=null===(t=d.data)||void 0===t?void 0:t.sites)&&void 0!==s?s:{},x=null!==(i=null===(n=d.data)||void 0===n?void 0:n.total_bytes)&&void 0!==i?i:0,h=b(),v=async e=>{await l.pathfinder.clear_user_context_for_domain({domain:e}),await f.invalidateQueries({queryKey:["user_context"]})};return(0,r.jsxs)("div",{className:"flex h-full max-h-[80svh] min-h-[80svh] flex-col gap-1 overflow-hidden lg:max-h-[640px] lg:min-h-[640px]",children:[(0,r.jsx)("div",{className:"flex items-center border-b px-4 pb-4 lg:p-4",children:(0,r.jsxs)(g.z,{variant:"ghost",onClick:o,className:"mr-2 p-0 pr-2 text-base enabled:hover:bg-transparent",children:[(0,r.jsx)(_.s,{className:"color-muted-foreground mr-1 size-4"}),(0,r.jsx)("h4",{className:"text-lg font-semibold",children:"Site data"})]})}),(0,r.jsx)("div",{className:"flex overflow-hidden px-6 pb-6 pt-3",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2 overflow-hidden",children:[(0,r.jsx)("div",{className:"text-sm font-semibold",children:"Why am I seeing so many sites?"}),(0,r.jsxs)("div",{className:"text-sm",children:["Many modern websites load additional content, such as ads, images, and analytics trackers, from other domains. This page shows all sites that have stored data in your browser, including sites you directly visited and those that appeared in the background. You can delete any ","site's"," data at any time."]}),(0,r.jsxs)("div",{className:"mt-3 flex w-full items-center justify-between",children:[(0,r.jsx)("h2",{className:"mb-2 text-lg font-semibold"}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[Object.keys(p).length," sites \xb7 ",function(e){let t=["B","KB","MB","GB","TB","PB"],n=e,r=0;for(;n>=1024&&r<t.length-1;)n/=1024,r++;return"".concat(n.toFixed(0)).concat(t[r])}(x)]})]}),(0,r.jsxs)(C,{className:"scrollbar-gutter-stable relative justify-start !gap-0 divide-y overflow-scroll !p-0",col:!0,children:[d.isLoading&&(0,r.jsx)("div",{className:"flex w-full items-center justify-center py-4",children:(0,r.jsx)(w.$,{className:"size-6 text-muted-foreground"})}),Object.keys(p).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,r.jsx)(eg,{domain:e,alt:e,className:"size-4"}),(0,r.jsx)(u.H,{className:"whitespace-nowrap text-sm font-medium",message:e})]}),(0,r.jsx)(g.z,{variant:"ghost",className:"!h-auto rounded-full !py-1",onClick:()=>h("Clear site data",()=>v(e)),children:(0,r.jsx)(ew.X,{className:"size-4"})})]},e))]})]})})]})}let eF=(0,eO.L)("SettingsStore",(e,t)=>({version:11,hydrated:!1,values:{hydrated:!1,show_all_actions:!1,auth_token:null,engine:null}}),{debug:!1,enhanceStore:e=>(0,l.tJ)(e,{name:"cua-operator-settings",partialize:e=>{let{version:t,values:n}=e;return{version:t,values:n}},onRehydrateStorage:()=>(e,t)=>{t&&console.debug("[SettingsStore]","hydration:error",{error:t})},merge(e,t){let n={...t};if(n.hydrated=!0,!e)return n;if(e.version===n.version){let t=o()({},n.values,e.values);return{...n,values:t}}return n}})}),eK=s.createContext({setViewBrowsingData:()=>{},setViewSiteData:()=>{}}),eU={Register:function(){let e=eV();return(0,r.jsx)(eH.e.Register,{group:"General",label:"View Settings",shortcuts:["MOD+SHIFT+S"],handler:()=>e({})})},Provider:function(e){let{children:t,...n}=e;return(0,r.jsx)(eF.Provider,{debug:"SettingsStore",...n,children:(0,r.jsx)(eq,{children:e.children})})},useSetting:function(e){return eF.useState(t=>t.values[e])},useActions:function(){return eF.useActions()},useModal:eV};function eB(e){var t,n,i;let o="text-sm text-foreground font-normal shrink-0 w-fit sm:w-40 h-9",l="mt-0 pl-6 pr-0.5 pb-0.5 w-full overflow-scroll",[d,f]=s.useState(e.appId?"apps":e.promptId||e.conversationId?"prompts":"general"),[m,p]=s.useState(null!==(t=e.appId)&&void 0!==t?t:null),[x,h]=s.useState(null!==(n=e.promptId)&&void 0!==n?n:null),[v,g]=s.useState(null!==(i=e.conversationId)&&void 0!==i?i:null),[b,j]=s.useState(!1),[N,C]=s.useState(!1),_=s.useMemo(()=>({setViewBrowsingData:j,setViewSiteData:C}),[]),k=c.S.useApi(),S=(0,eD.V)(),E=null!=m?m:"",A=a.a({queryKey:["app",E],queryFn:()=>k.pathfinder.apps_get(E),enabled:null!==m&&m.length>0}),T=null!=x?x:"",L=a.a({queryKey:["prompt",T],queryFn:()=>k.pathfinder.prompts_get(T),enabled:null!==x&&x.length>0});return A.data?(0,r.jsx)(z,{app:A.data,onBack:()=>p(null)}):L.data||""===x||null!==v&&v.length>0?(0,r.jsx)(eC,{prompt:L.data,conversationId:v,onBack:()=>{h(null),g(null)}}):L.isFetching||A.isFetching?(0,r.jsx)("div",{className:"flex h-full max-h-[80svh] min-h-[80svh] flex-col items-center justify-center lg:max-h-[640px] lg:min-h-[640px]",children:(0,r.jsx)(w.$,{className:"size-6 text-muted-foreground"})}):N?(0,r.jsx)(eK.Provider,{value:_,children:(0,r.jsx)(eI,{onBack:()=>C(!1)})}):b?(0,r.jsx)(eK.Provider,{value:_,children:(0,r.jsx)(O,{onBack:()=>j(!1)})}):(0,r.jsx)(eK.Provider,{value:_,children:(0,r.jsxs)("div",{className:"flex h-full max-h-[80svh] min-h-[80svh] flex-col lg:max-h-[640px] lg:min-h-[640px]",children:[(0,r.jsx)("div",{className:"mb-1 border-b",children:(0,r.jsx)(y.V.Title,{className:"px-6 pb-4 text-lg font-semibold sm:py-4",children:(0,r.jsx)(u.H,{message:"Settings"})})}),(0,r.jsxs)(eL,{value:d,onValueChange:f,className:"flex size-full flex-col overflow-hidden sm:flex-row",orientation:S?"vertical":"horizontal",children:[(0,r.jsx)(eR,{className:"hidden-scrollbar flex size-fit shrink-0 overflow-scroll p-3",children:(0,r.jsxs)("div",{className:"flex w-full shrink-0 gap-1 px-1 pb-1 sm:flex-col sm:px-0 sm:pb-0",children:[(0,r.jsx)(eP,{value:"general",className:o,children:(0,r.jsxs)("div",{className:"flex shrink-0 flex-row items-center gap-1 sm:gap-3",children:[(0,r.jsx)(eA,{className:"size-4 shrink-0"}),(0,r.jsx)(u.H,{message:"General"})]})}),(0,r.jsx)(eP,{value:"prompts",className:o,children:(0,r.jsxs)("div",{className:"flex shrink-0 flex-row items-center gap-1 sm:gap-3",children:[(0,r.jsx)(ez,{className:"size-4 shrink-0"}),(0,r.jsx)(u.H,{message:"Saved tasks"})]})}),(0,r.jsx)(eP,{value:"apps",className:o,children:(0,r.jsxs)("div",{className:"flex shrink-0 flex-row items-center gap-1 sm:gap-3",children:[(0,r.jsx)(ev.T,{className:"size-4 shrink-0"}),(0,r.jsx)(u.H,{message:"Websites"})]})}),(0,r.jsx)(eP,{value:"privacy",className:o,children:(0,r.jsxs)("div",{className:"flex shrink-0 flex-row items-center gap-1 sm:gap-3",children:[(0,r.jsx)(eE.$,{className:"size-4 shrink-0"}),(0,r.jsx)(u.H,{message:"Privacy"})]})})]})}),(0,r.jsx)(eM,{value:"general",className:l,children:(0,r.jsx)(ed,{})}),(0,r.jsx)(eM,{value:"prompts",className:l,children:(0,r.jsx)(e_,{setPromptId:h})}),(0,r.jsx)(eM,{value:"apps",className:l,children:(0,r.jsx)(R,{setAppId:p})}),(0,r.jsx)(eM,{value:"privacy",className:l,children:(0,r.jsx)(ex,{})})]})]})})}function eq(e){return eF.useState(e=>e.hydrated)?e.children:null}function eV(){let e=d.u.useModal();return t=>{let{appId:n,conversationId:s,promptId:a}=t;return e(()=>(0,r.jsx)(eB,{appId:n,conversationId:s,promptId:a}),{className:"lg:w-[696px]"})}}},99155:function(e,t,n){n.d(t,{w:function(){return s}});var r=n(9271);function s(e){return s.useWindowDebug(e),null}s.useWindowDebug=function(e){return r.useEffect(()=>{window[e.name]=e.value}),null}},90722:function(e,t,n){n.d(t,{s:function(){return s}});var r=n(44259);let s=n(9271).forwardRef((e,t)=>{let{color:n="currentColor",...s}=e;return(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,ref:t,children:(0,r.jsx)("path",{fill:n,d:"M14.7071 5.29289C15.0976 5.68342 15.0976 6.31658 14.7071 6.70711L9.41421 12L14.7071 17.2929C15.0976 17.6834 15.0976 18.3166 14.7071 18.7071C14.3166 19.0976 13.6834 19.0976 13.2929 18.7071L7.29289 12.7071C7.10536 12.5196 7 12.2652 7 12C7 11.7348 7.10536 11.4804 7.29289 11.2929L13.2929 5.29289C13.6834 4.90237 14.3166 4.90237 14.7071 5.29289Z"})})});s.displayName="ChevronLeft"},13200:function(e,t,n){n.d(t,{_:function(){return s}});var r=n(44259);let s=n(9271).forwardRef((e,t)=>{let{color:n="currentColor",...s}=e;return(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,ref:t,children:(0,r.jsx)("path",{fill:n,d:"M9.29289 18.7071C8.90237 18.3166 8.90237 17.6834 9.29289 17.2929L14.5858 12L9.29289 6.70711C8.90237 6.31658 8.90237 5.68342 9.29289 5.29289C9.68342 4.90237 10.3166 4.90237 10.7071 5.29289L16.7071 11.2929C16.8946 11.4804 17 11.7348 17 12C17 12.2652 16.8946 12.5196 16.7071 12.7071L10.7071 18.7071C10.3166 19.0976 9.68342 19.0976 9.29289 18.7071Z"})})});s.displayName="ChevronRight"},1819:function(e,t,n){n.d(t,{T:function(){return s}});var r=n(44259);let s=n(9271).forwardRef((e,t)=>{let{color:n="currentColor",...s}=e;return(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,ref:t,children:(0,r.jsx)("path",{fill:n,fillRule:"evenodd",clipRule:"evenodd",d:"M2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM11.9851 4.00291C11.9744 4.00615 11.953 4.01416 11.921 4.03356C11.7908 4.11248 11.5742 4.32444 11.325 4.77696C11.0839 5.21453 10.8521 5.8046 10.6514 6.53263C10.3148 7.75315 10.0844 9.29169 10.019 11H13.981C13.9156 9.29169 13.6852 7.75315 13.3486 6.53263C13.1479 5.8046 12.9161 5.21453 12.675 4.77696C12.4258 4.32444 12.2092 4.11248 12.079 4.03356C12.047 4.01416 12.0256 4.00615 12.0149 4.00291C12.0067 4.00046 12.001 4.00006 11.9996 4C11.9982 4.00006 11.9933 4.00046 11.9851 4.00291ZM8.01766 11C8.08396 9.13314 8.33431 7.41167 8.72334 6.00094C8.87366 5.45584 9.04762 4.94639 9.24523 4.48694C6.48462 5.49946 4.43722 7.9901 4.06189 11H8.01766ZM4.06189 13H8.01766C8.09487 15.1737 8.42177 17.1555 8.93 18.6802C9.02641 18.9694 9.13134 19.2483 9.24522 19.5131C6.48461 18.5005 4.43722 16.0099 4.06189 13ZM10.019 13C10.0955 14.9972 10.3973 16.7574 10.8274 18.0477C11.0794 18.8038 11.3575 19.3436 11.6177 19.6737C11.7455 19.8359 11.8494 19.9225 11.9186 19.9649C11.9515 19.9852 11.9736 19.9935 11.9847 19.9969C11.9948 20 11.9999 20 11.9999 20C11.9999 20 12.0049 20.0001 12.0153 19.9969C12.0264 19.9935 12.0485 19.9852 12.0814 19.9649C12.1506 19.9225 12.2545 19.8359 12.3823 19.6737C12.6425 19.3436 12.9206 18.8038 13.1726 18.0477C13.6027 16.7574 13.9045 14.9972 13.981 13H10.019ZM15.9823 13C15.9051 15.1737 15.5782 17.1555 15.07 18.6802C14.9736 18.9694 14.8687 19.2483 14.7548 19.5131C17.5154 18.5005 19.5628 16.0099 19.9381 13H15.9823ZM19.9381 11C19.5628 7.99009 17.5154 5.49946 14.7548 4.48694C14.9524 4.94639 15.1263 5.45584 15.2767 6.00094C15.6657 7.41167 15.916 9.13314 15.9823 11H19.9381Z"})})});s.displayName="Globe"},58973:function(e,t,n){n.d(t,{$:function(){return s}});var r=n(44259);let s=n(9271).forwardRef((e,t)=>{let{color:n="currentColor",...s}=e;return(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,ref:t,children:(0,r.jsx)("path",{d:"M12.4008 3.76695C12.1453 3.65516 11.8547 3.65516 11.5992 3.76695L5.59918 6.39195C5.23519 6.55119 5 6.91081 5 7.30811V13.0001C5 14.7136 5.61571 16.2834 6.63795 17.5002C7.92137 15.9724 9.84647 15.0001 11.9999 15.0001C14.1534 15.0001 16.0785 15.9725 17.3619 17.5003C18.3843 16.2835 19 14.7137 19 13.0001V7.30811C19 6.91081 18.7648 6.55119 18.4008 6.39195L12.4008 3.76695ZM15.8701 18.8339C14.9525 17.7136 13.5589 17.0001 11.9999 17.0001C10.441 17.0001 9.04741 17.7136 8.12979 18.8338C9.23837 19.5707 10.569 20.0001 12 20.0001C13.4309 20.0001 14.7615 19.5707 15.8701 18.8339ZM10.7975 1.93463C11.5641 1.59926 12.4359 1.59926 13.2025 1.93463L19.2025 4.55963C20.2944 5.03737 21 6.11621 21 7.30811V13.0001C21 17.9706 16.9706 22.0001 12 22.0001C7.02944 22.0001 3 17.9706 3 13.0001V7.30811C3 6.11621 3.70558 5.03737 4.79754 4.55963L10.7975 1.93463ZM12 8.50007C11.0335 8.50007 10.25 9.28358 10.25 10.2501C10.25 11.2166 11.0335 12.0001 12 12.0001C12.9665 12.0001 13.75 11.2166 13.75 10.2501C13.75 9.28358 12.9665 8.50007 12 8.50007ZM8.25 10.2501C8.25 8.17901 9.92893 6.50007 12 6.50007C14.0711 6.50007 15.75 8.17901 15.75 10.2501C15.75 12.3211 14.0711 14.0001 12 14.0001C9.92893 14.0001 8.25 12.3211 8.25 10.2501Z",fill:n})})});s.displayName="IdentitySecure"},87634:function(e,t,n){n.d(t,{X:function(){return s}});var r=n(44259);let s=n(9271).forwardRef((e,t)=>{let{color:n="currentColor",...s}=e;return(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,ref:t,children:(0,r.jsx)("path",{fill:n,d:"M5.63603 5.63603C6.02656 5.24551 6.65972 5.24551 7.05025 5.63603L12 10.5858L16.9497 5.63603C17.3403 5.24551 17.9734 5.24551 18.364 5.63603C18.7545 6.02656 18.7545 6.65972 18.364 7.05025L13.4142 12L18.364 16.9497C18.7545 17.3403 18.7545 17.9734 18.364 18.364C17.9734 18.7545 17.3403 18.7545 16.9497 18.364L12 13.4142L7.05025 18.364C6.65972 18.7545 6.02656 18.7545 5.63603 18.364C5.24551 17.9734 5.24551 17.3403 5.63603 16.9497L10.5858 12L5.63603 7.05025C5.24551 6.65972 5.24551 6.02656 5.63603 5.63603Z"})})});s.displayName="X"},43067:function(e,t,n){n.d(t,{z:function(){return c}});var r=n(44259),s=n(9271),a=n(66126),i=n(96361),o=n(36670);let l=(0,i.j)("inline-flex select-none items-center justify-center whitespace-nowrap text-sm font-medium transition-colors duration-150 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:"rounded-full border border-primary bg-primary text-primary-foreground enabled:hover:bg-primary/90",destructive:"rounded-full bg-destructive text-destructive-foreground enabled:hover:bg-destructive/90","destructive-ghost":"rounded-md text-destructive enabled:hover:bg-accent","destructive-outline":"rounded-full border border-destructive bg-background text-destructive focus-visible:ring-destructive enabled:hover:bg-destructive/10",outline:"rounded-full border border-border bg-background enabled:hover:bg-accent enabled:hover:text-accent-foreground",secondary:"rounded-full bg-secondary text-secondary-foreground enabled:hover:bg-secondary/80",ghost:"rounded-md enabled:hover:bg-accent enabled:hover:text-accent-foreground",link:"rounded-md text-primary underline-offset-4 enabled:hover:underline",round:"rounded-full bg-primary text-primary-foreground focus-within:bg-primary/80 enabled:hover:bg-primary/80","secondary-round":"rounded-full bg-secondary text-secondary-foreground shadow-sm enabled:hover:bg-secondary/80","semi-round":"rounded-xl bg-primary text-primary-foreground enabled:hover:bg-primary/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-10 px-8",xl:"h-12 px-8",icon:"size-10",icon_sm:"size-7"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:n,variant:s,size:i,asChild:c=!1,...u}=e,d=c?a.g7:"button";return(0,r.jsx)(d,{className:(0,o.cn)("w-max",l({variant:s,size:i,className:n})),ref:t,...u})});c.displayName="Button"},51187:function(e,t,n){n.d(t,{V:function(){return y}});var r=n(44259),s=n(9271),a=n(30780),i=n(60472),o=n(36670),l=n(83346);let c=a.fC,u=a.xz,d=a.h_,f=a.x8,m=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-overlay-background/50","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s})});m.displayName=a.aV.displayName;let p=s.forwardRef((e,t)=>{let{className:n,children:s,hideCloseButton:c=!1,...u}=e;return(0,r.jsx)(d,{children:(0,r.jsxs)(l.e.Modal,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(a.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 max-h-[90vh] w-full max-w-[90vw] translate-x-[-50%] translate-y-[-50%] border bg-background shadow-xl sm:rounded-2xl wide:max-w-wide","duration-200","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]",n),...u,children:[(0,r.jsx)("div",{className:"flex max-h-[90vh] flex-col",children:s}),c?null:(0,r.jsxs)(a.x8,{className:(0,o.cn)("absolute right-6 top-5 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"),children:[(0,r.jsx)(i.Pxu,{className:"size-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})})});p.displayName=a.VY.displayName;let x=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col justify-center space-y-1.5 text-center sm:text-left",t),...n})};x.displayName="DialogHeader";let h=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};h.displayName="DialogFooter";let v=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none",n),...s})});v.displayName=a.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",n),...s})});g.displayName=a.dk.displayName;let y={Root:c,Portal:d,Overlay:m,Trigger:u,Close:f,Content:p,Header:x,Footer:h,Title:v,Description:g}},96389:function(e,t,n){n.d(t,{I:function(){return i}});var r=n(44259),s=n(9271),a=n(36670);let i=s.forwardRef((e,t)=>{let{className:n,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,a.cn)("flex h-12 w-full rounded-lg border border-input bg-transparent px-3 py-4","text-sm placeholder:text-muted-foreground","file:border-0 file:bg-transparent file:text-sm file:font-medium","transition-colors","focus-visible:outline-none","group-focus-within:outline-none group-focus-within:ring-1 group-focus-within:ring-ring","disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i})});i.displayName="Input"},71913:function(e,t,n){n.d(t,{$:function(){return a}});var r=n(44259),s=n(36670);function a(e){let{className:t,...n}=e;return(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,s.cn)("animate-spin",t),...n,children:(0,r.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})}},7583:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(44259),s=n(9271),a=n(36670),i=n(9120);let o=s.forwardRef((e,t)=>{let{className:n,style:o,onChange:l,enterKeyHint:c,inputMode:u,...d}=e;s.useImperativeHandle(t,()=>({get value(){var e;return(null===(e=g.current)||void 0===e?void 0:e.value)||""},get node(){return g.current},set(e){g.current&&(g.current.value=e,f.current.synchronizeTextHeight(e))},synchronizeTextHeight(){g.current&&f.current.synchronizeTextHeight(g.current.value)}}),[]);let f=s.useRef({synchronizeTextHeight:y});f.current.synchronizeTextHeight=y,s.useEffect(function(){e.value&&f.current.synchronizeTextHeight(e.value)},[e.value]);let m=s.useRef(null),[p,x]=s.useState(1),h=Object.assign({},o,{fontSize:16,lineHeight:i.i.px(20),paddingBottom:12,paddingTop:12}),v=(0,a.cn)("flex w-full bg-muted/60 px-2","whitespace-pre-wrap placeholder:text-muted-foreground","force-scrollbar scrollbar-gutter-stable resize-none overflow-auto","rounded-lg border border-input","outline-none","transition-colors duration-200","disabled:cursor-not-allowed disabled:bg-foreground/10 disabled:text-muted-foreground",n),g=s.useRef(null);return(0,r.jsx)("textarea",{ref:g,className:v,onChange:function(e){let t=e.target;y(t.value),"function"==typeof l&&l(t.value)},style:{...h,height:20*p+24+2,maxHeight:226,overflow:p>10?"auto":"hidden"},inputMode:e.inputMode||"text",enterKeyHint:e.enterKeyHint||"enter",...d});function y(e){let t=m.current;t&&(t.innerHTML=e.replace(/\n$/g,"\n."),x(Math.max(1,(t.offsetHeight-24-2)/20)))}});o.displayName="Textarea"},64860:function(e,t,n){n.d(t,{u:function(){return d}});var r=n(44259),s=n(9271),a=n(23377),i=n(36670);let o=a.zt,l=a.fC,c=a.xz,u=s.forwardRef((e,t)=>{let{className:n,sideOffset:s=4,...o}=e;return(0,r.jsx)(a.VY,{ref:t,sideOffset:s,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md","animate-in fade-in-0 zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...o})});u.displayName=a.VY.displayName;let d={Root:l,Trigger:c,Content:u,Provider:o}},31544:function(e,t,n){n.d(t,{S:function(){return r}});class r extends Error{constructor(e){super(e),this.name="UnreachableCaseError"}}},36670:function(e,t,n){n.d(t,{cn:function(){return a}});var r=n(33979),s=n(64810);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}},81380:function(e,t,n){function*r(e){let t=0;for(let n of e)yield[t,n],t++}n.d(t,{R:function(){return r}}),r.async=async function*(e){let t=0;for await(let n of e)yield[t,n],t++}},61805:function(e,t,n){n.d(t,{g:function(){return l},i:function(){return d}});var r=n(93953),s=n.n(r),a=n(30529),i=n(57319),o=n(55095);async function l(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={method:"POST",credentials:"include"};t&&(a.body=JSON.stringify(t));let i=s()(a,r);i.headers||(i.headers=new Headers),i.headers instanceof Headers&&i.headers.set("Content-Type","application/json");try{n=await fetch(e,i)}catch(e){throw new d(new Response(null,{status:500}))}if(!n.ok){let e=new d(n);throw await e.wait_for_response(),await c(e),e}return n.json()}let c=async e=>{var t,n,r,s;i.U.addError(e,{code:null===(t=e.json.detail)||void 0===t?void 0:t.code,status:e.response.status}),401===e.response.status&&((null===(n=e.json.detail)||void 0===n?void 0:n.code)==="expired_session_key"||(null===(r=e.json.detail)||void 0===r?void 0:r.code)==="token_expired"||(null===(s=e.json.detail)||void 0===s?void 0:s.code)==="token_invalidated")&&await u()};async function u(){let e;e=o.Rk?new URL("/api/auth/signin","https://operator.chatgpt.com").toString():new URL("/auth/login?next=/operator","https://chatgpt.com").toString(),await (0,a.signOut)({callbackUrl:e})}class d extends Error{async wait_for_response(){let e=await this.response.text();try{this.json=JSON.parse(e)}catch(t){this.json={detail:{code:"not_json_response",text:e.substring(0,1e3)}}}}constructor(e){super("[ErrorResponse] ".concat(e.url)),this.response=e,this.json={}}}},40016:function(e,t,n){n.d(t,{k:function(){return r}});function r(e,t){if(!e)throw Error(t)}},79866:function(e,t,n){n.d(t,{B:function(){return i}});var r=n(9271),s=n(36853),a=n(22646);let i=()=>{var e;let t=a.S.useApi(),n=null===(e=(0,s.a)({queryKey:["pathfinder_apps_list"],queryFn:t.pathfinder.apps_list}).data)||void 0===e?void 0:e.apps;return r.useMemo(()=>{var e;return null!==(e=null==n?void 0:n.reduce((e,t)=>(e[t.id]=t,e),{}))&&void 0!==e?e:{}},[n])}},78574:function(e,t,n){n.d(t,{G:function(){return s}});var r=n(9271);function s(e){let t=r.useRef(e);return t.current=e,t}},99195:function(e,t,n){n.d(t,{N:function(){return o}});var r=n(9271);let s=()=>()=>{},a=Symbol("not-render"),i=()=>a;function o(){return function(e){let t=r.useSyncExternalStore(s,e.client,i),n=r.useSyncExternalStore(s,i,e.server);return n===a?t:n}({client:()=>!1,server:()=>!0})}},26547:function(e,t,n){n.d(t,{a:function(){return i}});var r=n(36853),s=n(22646),a=n(61805);let i=()=>{let e=s.S.useApi();return(0,r.a)({queryKey:["me"],queryFn:async()=>{try{return{user:await e.pathfinder.me()}}catch(e){if(e instanceof a.i&&401===e.response.status){var t;return{user:null,error:null===(t=e.json.detail)||void 0===t?void 0:t.code}}throw e}}})}},30558:function(e,t,n){n.d(t,{U:function(){return r}});let r=(0,n(73565).L)("DimensionsStore",(e,t)=>({width:1440,height:900}),{debug:!1})},57214:function(e,t,n){n.d(t,{D:function(){return r}});var r={};n.r(r),n.d(r,{Provider:function(){return c},useDimensions:function(){return u.B},useWide:function(){return d.V}});var s=n(44259),a=n(30558),i=n(9271),o=n(99195);function l(e){let t=0,n=0;return e||(t=window.innerWidth,n=window.innerHeight),{width:t,height:n}}function c(e){let t=function(){let e=(0,o.N)(),[t,n]=i.useState(()=>l(e));return i.useEffect(()=>{if(e)return;function t(){n(l())}t();let r=visualViewport||window;return r.addEventListener("resize",t),function(){r.removeEventListener("resize",t)}},[e]),t}();return(0,s.jsx)(a.U.Provider,{debug:"DimensionsStore",dangerouslyStoreStateOverride:e=>{t.width&&t.height&&(e.width=t.width,e.height=t.height)},children:e.children})}var u=n(10650),d=n(4466)},10650:function(e,t,n){n.d(t,{B:function(){return s}});var r=n(30558);function s(e){return r.U.useState(t=>e(t))}},4466:function(e,t,n){n.d(t,{I:function(){return o},V:function(){return a}});var r=n(9120),s=n(10650);function a(){return(0,s.B)(e=>e.width>=i)}let i=parseInt(r.i.tailwind.theme.spacing.wide,10);function o(){return(0,s.B)(e=>e.width>=l)}let l=parseInt(r.i.tailwind.theme.screens.sm,10)},23209:function(e,t,n){n.d(t,{zt:function(){return d},qs:function(){return s},Kz:function(){return f}});var r,s,a=n(44259),i=n(9271),o=n(83828),l=n(99155);class c{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}(r=s||(s={})).CreateConversation="operator_create_conversation",r.AddMessageToConversation="operator_add_message_to_conversation";let u=i.createContext(null);function d(e){let t=i.useRef(new c),n=i.useRef({}),r=i.useRef({}),s=i.useRef({}),d=i.useCallback(async function(e){var s;await t.current.promise;let a=await (null===(s=window.SentinelSDK)||void 0===s?void 0:s.token(e));if(!a)throw console.error("Failed to get Sentinel token for flow: ".concat(e)),Error("Failed to get Sentinel token for flow: ".concat(e));return n.current[e]=a,r.current[e]=Date.now(),a},[]),f=i.useCallback(async function(e){let t=s.current[e];if(t)return t;let n=d(e).finally(()=>{s.current[e]=null});return s.current[e]=n,n},[d]),m=i.useMemo(()=>({getSentinelHeaders:async function(e){var t;let s=Date.now(),a=null!==(t=r.current[e])&&void 0!==t?t:0,i=n.current[e];return i&&!(s-a>54e4)?{"OpenAI-Sentinel-Token":i}:{"OpenAI-Sentinel-Token":await f(e)}},updateSentinelToken:f}),[f]);return(0,a.jsxs)(u.Provider,{value:m,children:[(0,a.jsx)(l.w,{name:"Sentinel",value:{...m}}),(0,a.jsx)(o.default,{src:"".concat("https://chatgpt.com","/backend-api/sentinel/sdk.js"),strategy:"lazyOnload",onLoad:()=>{t.current.resolve()}}),e.children]})}function f(){let e=i.useContext(u);if(!e)throw Error("Sentinel.useSentinelToken must be used within <Sentinel.Provider>");return e}},10667:function(e,t,n){n.d(t,{t:function(){return r}});var r=n(23209)},73565:function(e,t,n){n.d(t,{L:function(){return g}});var r=n(44259),s=n(9271),a=n(56792),i=n(88492),o=n(72210),l=n(74743),c=n(70757),u=n(99155),d=n(61597),f=n.n(d),m=n(40016);function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let s=e[r],a=[...n,r],i=a.join("."),o=typeof s;t({key:r,value:s,path:i,pathList:a,type:o}),"object"===o&&null!==s&&p(s,t,a)}}function x(e,t){let n={};function r(e){let{path:t}=e;n[t]||(n[t]={a:x.UNSET,b:x.UNSET})}p(e,e=>{r(e);let t=n[e.path];(0,m.k)(t,"changes path must exist"),t.a=e.value}),p(t,e=>{r(e);let t=n[e.path];(0,m.k)(t,"changes path must exist"),t.b=e.value});let s={};for(let e of Object.entries(n)){let[t,n]=e;f()(n.a)||f()(n.b)||n.a===n.b||(s[t]=n)}return s}x.UNSET=Symbol("UNSET");var h=n(69093);let v={node_modules_dir:/\/node_modules\//,stack_line_parens:RegExp(" at (?<name>.*?) \\((?<parens>.*?):(?<line>\\d+):(?<column>\\d+)\\)$"),stack_line_plain:RegExp(" at (?<name>.*?):(?<line>\\d+):(?<column>\\d+)$"),parens:RegExp("(?<filepath>[a-z0-9./]*)$","i")};function g(e,t,n){let d=t=>(r,s,a)=>{let i=function(){for(var t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];let o=s();r(...a);let l=null==n?void 0:n.middleware;l&&r(e=>{l(e,o)});let c=s();(null==n?void 0:n.debug)&&y(e,o,c)};return a.setState=i,t(i,s,a)},f=!!(null==n?void 0:n.devtools);function p(r){let s=(0,o.n)(d((0,i.mW)((s,i)=>(function o(){let l=t(s,i);return(0,a.Uy)(l,t=>{t.actions||(t.actions={}),"function"==typeof(null==r?void 0:r.initialStoreState)&&r.initialStoreState(t,s,i),(null==n?void 0:n.debug)&&y(e,l,t),t.actions.state=()=>i(),t.actions.set=e=>s(e),t.actions.reset=e=>{s(t=>{let n=i();Object.assign(t,o()),"function"==typeof e&&e(t,n)})}})})(),{name:e,enabled:f})));if(null==n?void 0:n.enhanceStore){let e=n.enhanceStore,t={...r};return delete t.children,delete t.debug,delete t.initialStoreState,delete t.dangerouslyStoreStateOverride,(0,c.M)()(e(s,t))}return(0,c.M)()(s)}let x=s.createContext(null);function v(t,n){let r=function(){let t=s.useContext(x);return(0,m.k)(t,"".concat(e,".useState must be used within a <").concat(e,".Provider>")),t}(),a=(0,l.s)(r,t,n);if(h.O.Rk&&a===r.getState())throw Error("Selector in ".concat(e," cannot return the entire state. Please select a specific part of the state."));return a}return x.displayName=e,{Provider:function(e){let[t]=s.useState(()=>p(e)),{dangerouslyStoreStateOverride:n}=e;return s.useEffect(()=>{n&&t.setState(e=>{n(e)})},[t,n]),(0,r.jsxs)(s.Fragment,{children:[e.debug?(0,r.jsx)(u.w,{name:e.debug,value:t}):null,(0,r.jsx)(x.Provider,{value:t,children:e.children})]})},useState:v,useActions:function(){return v(e=>e.actions)},useIsContextAvailable:function(){return!!s.useContext(x)},__dangerousGlobalStore:function(e){return p({children:null,...e})}}}function y(e,t,n){let r=function(e){let t=(Error().stack||"").split("\n"),n=[];for(let e of t){if(v.node_modules_dir.test(e))continue;let t=e.match(v.stack_line_parens);if(null==t?void 0:t.groups){let e=t.groups;(0,m.k)(e.name,"groups.name must exist"),(0,m.k)(e.parens,"groups.parens must exist"),(0,m.k)(e.line,"groups.line must exist"),(0,m.k)(e.column,"groups.column must exist");let r={};r.name=e.name.trim(),r.line=parseInt(e.line,10),r.column=parseInt(e.column,10);let s=e.parens.trim().match(v.parens);(null==s?void 0:s.groups)&&((0,m.k)(s.groups.filepath,"parens_match.groups.filepath must exist"),r.filepath=s.groups.filepath),n.push(r);continue}let r=e.match(v.stack_line_plain);if(null==r?void 0:r.groups){let e=r.groups;(0,m.k)(e.name,"groups.name must exist"),(0,m.k)(e.line,"groups.line must exist"),(0,m.k)(e.column,"groups.column must exist");let t={};t.name=e.name.trim(),t.line=parseInt(e.line,10),t.column=parseInt(e.column,10),n.push(t);continue}}return n}(),s=x(t,n);Object.keys(s).length&&console.debug("[".concat(e,"]"),{diff:s,previous:t,next:n,stack:r})}},9120:function(e,t,n){n.d(t,{i:function(){return r}});var r={};n.r(r),n.d(r,{percent:function(){return v},px:function(){return h},tailwind:function(){return x}});var s=n(62215),a=n.n(s),i=n(7473),o=n(18515),l=n.n(o),c=n(57391),u=n.n(c);let d=l()(function(e){let{addUtilities:t}=e;t({".light":{"color-scheme":"light"},".dark":{"color-scheme":"dark"}})}),f={xs:p(640),wide:p(1024)},m={darkMode:["class"],content:["./src/**/*.{js,ts,jsx,tsx,mdx}"],prefix:"",plugins:[n(92167),n(25988),d,u()],theme:{container:{center:!0,padding:"2rem"},extend:{screens:{...f},spacing:{...f},fontFamily:{serif:["ui-serif","Georgia","Cambria","Times New Roman","serif"],sans:["ui-sans-serif","-apple-system","system-ui","Segoe UI","Helvetica","Apple Color Emoji","Arial","sans-serif","Segoe UI Emoji","Segoe UI Symbol"],circle:["Circle","system-ui","sans-serif"],mono:["ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono","monospace"]},opacity:{1:"100%"},colors:{border:"hsl(var(--border))",input:"hsl(var(--input))",ring:"hsl(var(--ring))",background:"hsl(var(--background))","subtle-background":"hsl(var(--subtle-background))","overlay-background":"hsl(var(--overlay-background))","composer-background":"hsl(var(--composer-background))",foreground:"hsl(var(--foreground))","message-surface":"rgb(var(--message-surface))",primary:{DEFAULT:"hsl(var(--primary))",foreground:"hsl(var(--primary-foreground))"},secondary:{DEFAULT:"hsl(var(--secondary))",foreground:"hsl(var(--secondary-foreground))"},destructive:{DEFAULT:"hsl(var(--destructive))",foreground:"hsl(var(--destructive-foreground))"},muted:{DEFAULT:"hsl(var(--muted))",foreground:"hsl(var(--muted-foreground))"},accent:{DEFAULT:"hsl(var(--accent))",foreground:"hsl(var(--accent-foreground))"},popover:{DEFAULT:"hsl(var(--popover))",foreground:"hsl(var(--popover-foreground))"},card:{DEFAULT:"hsl(var(--card))",foreground:"hsl(var(--card-foreground))"},link:{DEFAULT:"hsl(var(--link))",hover:"hsl(var(--link-hover))"},brand:{green:{DEFAULT:"#19c37d",800:"#05A746"},purple:{DEFAULT:"#ab68ff",600:"#715FDE",700:"#6353C3",800:"#5400DE"},blue:{800:"#0066DE"}},gray:{...i.gray,750:"#2f2f2f"},token:{"composer-surface":"var(--composer-surface)","message-surface":"var(--message-surface)","text-primary":"var(--text-primary)","text-secondary":"var(--text-secondary)","text-tertiary":"var(--text-tertiary)","text-placeholder":"var(--text-placeholder)","text-quaternary":"var(--text-quaternary)","text-error":"var(--text-error)","surface-error":"rgb(var(--surface-error) / <alpha-value>)","border-light":"var(--border-light)","border-xlight":"var(--border-xlight)","border-medium":"var(--border-medium)","border-heavy":"var(--border-heavy)","border-xheavy":"var(--border-xheavy)","border-sharp":"var(--border-sharp)","icon-secondary":"var(--icon-secondary)","hint-bg":"var(--hint-bg)","hint-text":"var(--hint-text)",link:"var(--link)","link-hover":"var(--link-hover)","main-surface-primary":"var(--main-surface-primary)","main-surface-primary-inverse":"var(--main-surface-primary-inverse)","main-surface-secondary":"var(--main-surface-secondary)","main-surface-tertiary":"var(--main-surface-tertiary)","sidebar-surface-primary":"var(--sidebar-surface-primary)","sidebar-surface-secondary":"var(--sidebar-surface-secondary)","sidebar-surface-tertiary":"var(--sidebar-surface-tertiary)","sidebar-title-primary":"var(--sidebar-title-primary)","sidebar-icon":"var(--sidebar-icon)"}},boxShadow:{"sidebar-shadow":"0 0px 24px rgba(0, 0, 0, 0.15)"},borderRadius:{lg:"var(--radius)",md:"calc(var(--radius) - 2px)",sm:"calc(var(--radius) - 4px)"},keyframes:{"accordion-down":{from:{height:"0"},to:{height:"var(--radix-accordion-content-height)"}},"accordion-up":{from:{height:"var(--radix-accordion-content-height)"},to:{height:"0"}},"scale-thinking-cursor":{"0%, 100%":{transform:"scale(1)"},"40%":{transform:"scale(0.6)"}}},animation:{"accordion-down":"accordion-down 0.2s ease-out","accordion-up":"accordion-up 0.2s ease-out","scale-thinking-cursor":"scale-thinking-cursor 1.75s infinite ease-in-out"},typography:{DEFAULT:{css:{blockquote:{"font-style":"normal"},pre:{backgroundColor:"transparent"},"--tw-prose-body":"var(--text-primary)","--tw-prose-invert-body":"var(--text-primary)","--tw-prose-headings":"var(--text-primary)","--tw-prose-invert-headings":"var(--text-primary)","--tw-prose-lead":"var(--text-primary)","--tw-prose-invert-lead":"var(--text-primary)","--tw-prose-links":"var(--text-primary)","--tw-prose-invert-links":"var(--text-primary)","--tw-prose-bold":"var(--text-primary)","--tw-prose-invert-bold":"var(--text-primary)","--tw-prose-bullets":"var(--text-primary)","--tw-prose-invert-bullets":"var(--text-primary)","--tw-prose-counters":"var(--text-primary)","--tw-prose-invert-counters":"var(--text-primary)","--tw-prose-quotes":"var(--text-primary)","--tw-prose-invert-quotes":"var(--text-primary)","--tw-prose-hr":"var(--border-xheavy)","--tw-prose-invert-hr":"var(--border-xheavy)","--tw-prose-captions":"var(--text-secondary)","--tw-prose-invert-captions":"var(--text-secondary)","--tw-prose-code":"var(--text-primary)","--tw-prose-invert-code":"var(--text-primary)"}}},zIndex:{100:"100"}}}};function p(e){return"".concat(e,"px")}let x=a()(m);function h(e){return"".concat(e,"px")}function v(e){return"".concat(e,"%")}},33424:function(e,t,n){n.d(t,{P:function(){return r}});let r={service:"operator-web",env:"https://operator.chatgpt.com/operator-api",version:"unknown"}},57319:function(e,t,n){n.d(t,{S:function(){return a},U:function(){return c}});var r=n(64763),s=n(33424);function a(){return r.v}class i{init(){r.v.init(l)}addAction(e){r.v.addAction(e.name,{..."context"in e?e.context:{}})}addError(e,t){r.v.addError(e,t)}addPerformance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=performance.now(),s={...t};return{updateContext(e){s={...s,...e}},stop(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=performance.now();r.v.addAction(e,{durationMs:a-n,...s,...t})}}}}let o=/^https:\/\/.*?\.cua\.openai\.org/,l={applicationId:"60669a74-3c80-43e4-99b8-ce33b06e5600",clientToken:"pub3c8ae5de8e600df9604ec326e91c70f6",site:"datadoghq.com",service:s.P.service,env:s.P.env,version:s.P.version,sessionSampleRate:100,sessionReplaySampleRate:100,trackUserInteractions:!0,trackResources:!0,trackLongTasks:!0,defaultPrivacyLevel:"allow",allowedTracingUrls:[{propagatorTypes:["datadog","tracecontext"],match:e=>o.test(e)}],traceSampleRate:100},c=new i},55095:function(e,t,n){n.d(t,{Rk:function(){return s},W6:function(){return o},zj:function(){return l}});var r=n(61512);let s=!1,a="staging"===r.env.OPENAI_ENV,i="prod"===r.env.OPENAI_ENV,o=!1;function l(){return i?"production":a?"staging":"development"}},69093:function(e,t,n){n.d(t,{O:function(){return r}});var r=n(55095)},83346:function(e,t,n){n.d(t,{e:function(){return r}});var r={};n.r(r),n.d(r,{DisplayShortcut:function(){return X},Key:function(){return Q},KeyboardShortcut:function(){return J},Modal:function(){return D},OperatingSystem:function(){return G},Provider:function(){return R},Register:function(){return V},Scope:function(){return I},eventKeySet:function(){return j},eventModifierKeySet:function(){return y},getKeyLabel:function(){return $},parseShortcut:function(){return K},useApi:function(){return P},useKeyboardListener:function(){return N}});var s=n(44259),a=n(9271),i=n(99155),o=n(40016),l=n(61597),c=n.n(l),u=n(7956),d=n.n(u),f=n(31544);let m="default";var p=n(81380);function x(e){let t={};for(let[n,r]of Object.entries(e))t[n]=r,t[r]=n;return t}let h=x({a:"apple"});h.a,h.apple;let v=function(e){let t=new Map;return function(){for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];let a=JSON.stringify(r),i=t.get(a);if(i)return i;let o=e(...r);return t.set(a,o),o}}(function(){let e=navigator.userAgent;return/Windows/.test(e)?"Windows":/Mac|iPad|iPhone/.test(e)?"Mac":/Linux/.test(e)?"Linux":"Mac"});var g=n(78574);function y(e){let t=new Set;for(let n of w)e[n]&&t.add(b[n]);return t}let w=Object.values(Object.freeze({altKey:"altKey",ctrlKey:"ctrlKey",metaKey:"metaKey",shiftKey:"shiftKey"})),b={altKey:"ALT",ctrlKey:"CONTROL",metaKey:"META",shiftKey:"SHIFT"};function j(e){let t=y(e),n=" "===e.key?"SPACE":e.key.toUpperCase();return t.add(n),{pressed:t,key:n}}function N(e){let t=(0,g.G)(e);a.useEffect(()=>{let e=function(e){let t=[],n=function(e,t){let n;let r=null!=t?t:1e3;return function(){for(var t=arguments.length,s=Array(t),a=0;a<t;a++)s[a]=arguments[a];clearTimeout(n),n=setTimeout(()=>e(...s),r)}}(()=>{t=[]},C);return{handleKeyDown:function(r){if(void 0===r.key||!(r.target instanceof HTMLElement))return;let s=r.target,{pressed:a,key:i}=j(r),o=Array.from(d()(t)||[]),l=Array.from(a).slice(0,-1),c=!1;if(o.length&&o.length===l.length&&(c=!0),c)for(let[e,t]of(0,p.R)(l))t!==o[e]&&(c=!1);c?t[t.length-1]=new Set(a):t.push(new Set(a));let u={key:i,pressed:new Set(a),sequence:[...t],target:s,event:r};return e.current(u),n(),u}}}(t);return document.addEventListener("keydown",e.handleKeyDown),function(){document.removeEventListener("keydown",e.handleKeyDown)}},[t])}let C=1e3;function _(e,t){return 1===t.size&&A(e,t)}function k(e,t){return e.keys.some(e=>"SHIFT"===e)?S(e,t)||S({type:e.type,keys:e.keys.map(z)},t):S(e,t)}function S(e,t){if(t.size!==e.keys.length)return!1;for(let n of e.keys)if(!A(n,t))return!1;return!0}function z(e){return E[e]||e}let E=x({"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"PLUS","[":"{","]":"}","\\":"|",";":":","'":'"',",":"<",".":">","/":"?"});function A(e,t){let n=e;return"MOD"===e&&(n="Mac"===v()?"META":"CONTROL"),t.has(n)}let T=function(){let e=new Set(["TEXTAREA","INPUT","SELECT"]);return function(t){return e.has(t.tagName)||t.isContentEditable}}(),L=a.createContext(null);function R(e){let[t]=a.useState(()=>(function(){let e=new Set,t=new Map,n=new Set,r=new Set,s=new Set,a={unregister:function(e){t.delete(e)},register:function(s){s.scope=s.scope||m,n.add(s.scope),s.modal&&r.add(s.modal),e.add(s.id),t.set(s.id,s)},shortcuts:{all:()=>i({filter_active:!1}),active:()=>i({filter_active:!0})},scopes:{all:()=>new Set(n)},modals:{all:()=>new Set(r),active:()=>d()(Array.from(s)),activate(e){s.add(e)},deactivate(e){s.delete(e)}}};return a;function i(n){let r=Array.from(t.values()),s=new Map,i=new Map;for(let r of Array.from(e)){let e=t.get(r);if(e){if(n.filter_active){let t=a.modals.active();if(t&&e.modal!==t)continue}for(let t of(i.has(e.group)||i.set(e.group,{labelMap:new Map}),e.shortcuts)){var l;let n=function e(t){if("string"==typeof t)return t;switch(t.type){case"combo":return t.keys.join("+");case"sequence":return t.keys.map(e).join(" ");default:throw new f.S(t)}}(t);s.has(n)||s.set(n,{shortcut:t,groupMap:new Map}),null===(l=s.get(n))||void 0===l||l.groupMap.set(e.group,{shortcut:t,group:e.group,label:e.label,handler:e.handler,ignoreTarget:e.ignoreTarget,scope:e.scope,modal:e.modal})}}}let u=[],m=[];for(let e of s.values()){let t=Array.from(e.groupMap.values()),n=d()(t);(0,o.k)(n,"last_shortcut must exist");let r=n.label;c()(n.shortcut)&&"sequence"===n.shortcut.type?m.push(n):u.push(n);let s=i.get(n.group);(0,o.k)(s,"group must exist"),s.labelMap.has(r)||s.labelMap.set(r,[]);let a=s.labelMap.get(r);(0,o.k)(a,"label_list must exist"),a.push(n)}return{uniqueList:m.concat(u),groupMap:i,all:r}}})());return(0,s.jsxs)(L.Provider,{value:t,children:[(0,s.jsx)(i.w,{name:"KeyboardShortcuts",value:t}),(0,s.jsx)(M,{}),e.children]})}function P(){let e=a.useContext(L);return(0,o.k)(e,"Must wrap React tree with <KeyboardShortcutContext.Provider>"),e}function M(){return!function(){let e=P();N(t=>(function(e,t){for(let n of e.shortcuts.active().uniqueList)if(!(!function(e,t){if("string"==typeof e)return _(e,t.pressed);switch(e.type){case"combo":return k(e,t.pressed);case"sequence":if(t.sequence.length<e.keys.length)return!1;for(let[n]of(0,p.R)(e.keys)){let r=-1*(n+1),s=e.keys.at(r),a=t.sequence.at(r);if(!s||!a||!("string"==typeof s?_(s,a):k(s,a)))return!1}return!0;default:throw new f.S(e)}}(n.shortcut,t)||function(e,t){let n;return"function"==typeof e.ignoreTarget&&(n=e.ignoreTarget(t.target)),"boolean"!=typeof n&&(n=T(t.target)),(0,o.k)("boolean"==typeof n,"ignore must be a boolean"),n}(n,t)))return t.event.preventDefault(),t.event.stopPropagation(),n.handler()})(e,t))}(),null}let D=a.forwardRef(function(e,t){let n=P(),r=a.useId(),i=O();return a.useEffect(()=>(i&&n.modals.activate(i),n.modals.activate(r),function(){n.modals.deactivate(r)}),[n,r,i]),(0,s.jsx)(H.Provider,{value:r,children:(0,s.jsx)("div",{ref:t,children:e.children})})});function O(){return a.useContext(H)}let H=a.createContext(void 0);function I(e){return(0,s.jsx)(F.Provider,{value:e.scope,children:e.children})}let F=a.createContext(void 0);function K(e){if(!Array.isArray(e))return U(e);let t=[];for(let n of e)t.push(U(n));return{type:"sequence",keys:t}}function U(e){let t,n=e;(0,o.k)("string"==typeof n,"shortcut must be string [".concat(n,"]")),q.doublePlus.test(n)&&(n=n.replace(q.doublePlus,"+PLUS"));let r=n.match(B);return((0,o.k)(null==r?void 0:r.groups,"invalid shortcut [".concat(n,"]")),r.groups.E?t=[r.groups.A,r.groups.B,r.groups.C,r.groups.D,r.groups.E]:r.groups.D?t=[r.groups.A,r.groups.B,r.groups.C,r.groups.D]:r.groups.C?t=[r.groups.A,r.groups.B,r.groups.C]:r.groups.B&&(t=[r.groups.A,r.groups.B]),t)?{type:"combo",keys:t}:r.groups.A}let B=function(){let e="[^+]+",t=t=>"(?:\\+(?<".concat(t,">").concat(e,"))?");return new RegExp(["^","(?<A>".concat(e,")"),t("B"),t("C"),t("D"),t("E")].join(""))}(),q={doublePlus:/\+\+/};function V(e){let t=a.useId(),n=P(),r=a.useContext(F)||m,s=O();return a.useEffect(()=>{let a;a="shortcuts"in e?e.shortcuts.map(K):[K(e.shortcut)];let i=e.scope||r,o={id:t,...e,scope:i,modal:s,shortcuts:a};return n.register(o),function(){n.unregister(t)}}),null}var W=n(36670);let Z=a.createContext(null),G={useValue:function(e){let t=a.useContext(Z);return e||t||v()},Override:function(e){return(0,s.jsx)(Z.Provider,{value:e.os,children:e.children})}};function $(e,t){let n=null!=t?t:v();switch(e){case"ESCAPE":return"Esc";case"ARROWUP":return"";case"ARROWDOWN":return"";case"ARROWLEFT":return"";case"ARROWRIGHT":return"";case"ENTER":return"Enter";case"TAB":return"Tab";case"SPACE":return"Space";case"BACKSPACE":return"";case"SHIFT":return"";case"CONTROL":return"Ctrl";case"INSERT":return"Ins";case"DELETE":return"Delete";case"HOME":return"Home";case"END":return"End";case"PAGEUP":return"Page up";case"PAGEDOWN":return"Page down";case"HELP":return"HELP";case"ALT":if("Mac"===n)return"";return"Alt";case"META":switch(n){case"Mac":return"";case"Windows":return"";case"Linux":return"";default:throw new f.S(n)}case"MOD":if("Mac"===n)return"";return"Ctrl";case"PLUS":return"+";default:return new f.S(e),e}}function Q(e){let t=G.useValue(e.os),n=$(e.value,t),r=1===n.length;if("raw"===e.format)return n;let a=(0,W.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium leading-4",r?"size-6":"px-2 py-1",Y[e.value]?"font-[monospace]":""),i=function(){switch(e.format){case"no-border":return(0,W.cn)(a,"bg-foreground/5 text-foreground/80");case"border":case void 0:return(0,W.cn)(a,"border bg-foreground/5 text-foreground/80");default:return new f.S(e.format),""}}();return(0,s.jsx)("div",{className:i,children:n})}let Y=Object.freeze({"*":"*"});function J(e){let t=G.useValue(e.os);if("string"==typeof e.shortcut)return(0,s.jsx)(Q,{value:e.shortcut,os:t,format:e.format});let n=[];for(let[r,i]of(0,p.R)(e.shortcut.keys)){let o=function(e){switch(e.type){case"combo":return(0,s.jsx)("span",{className:"inline-block w-0.5"});case"sequence":return(0,s.jsx)("span",{className:"px-2",children:"then"});default:throw new f.S(e)}}(e.shortcut);n.push((0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(J,{shortcut:i,os:t,format:e.format}),r===e.shortcut.keys.length-1?null:o]},r))}return(0,s.jsx)("span",{className:"whitespace-nowrap",children:n})}function X(e){let t=G.useValue(e.os);try{let n=K(e.shortcut);return(0,s.jsx)(J,{shortcut:n,os:t,format:e.format})}catch(e){return console.error(e),null}}}}]);